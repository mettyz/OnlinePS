{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/App.vue?e48d","webpack:///./src/components/midBlock.vue?bb54","webpack:///src/components/midBlock.vue","webpack:///./src/components/midBlock.vue?9e74","webpack:///./src/components/midBlock.vue","webpack:///./src/components/Edits.vue?a6fd","webpack:///./src/js/maths.js","webpack:///./src/js/operator.js","webpack:///src/components/Edits.vue","webpack:///./src/components/Edits.vue?b48f","webpack:///./src/components/Edits.vue","webpack:///./src/components/history.vue?2256","webpack:///src/components/history.vue","webpack:///./src/components/history.vue?2b6b","webpack:///./src/components/history.vue","webpack:///src/App.vue","webpack:///./src/App.vue?5b92","webpack:///./src/App.vue","webpack:///./src/plugins/vuetify.js","webpack:///./src/store/modules/clip.js","webpack:///./src/store/modules/scale.js","webpack:///./src/store/modules/rotate.js","webpack:///./src/js/list.js","webpack:///./src/store/index.js","webpack:///./src/main.js","webpack:///./src/assets/default1.png","webpack:///./src/assets/default2.png","webpack:///./src/assets/default3.png"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","_vm","this","_h","$createElement","_c","_self","attrs","barColor","on","$event","stopPropagation","drawer","_v","drawerRight","model","callback","$$v","expression","left","staticClass","canvasReady","right","staticRenderFns","mouseDownEvent","mouseMoveEvent","mouseReleaseEvent","directives","rawName","max","scopedSlots","_u","fn","ref","_s","editScale","endScaling","editRotate","endRotating","endClip","staticStyle","style","boxStyle","dotStyle","defaultImgs","showWarningMsg","choice","_e","getUserImg","download","component","VBtn","VCol","VContainer","VIcon","VRow","VSelect","VSlider","_l","item","title","icon","domProps","proxy","subItem","action","funcId","weightingFactor","arr","newarr","account","val","GaussianDistribution","createMartixArray","num","rows","cols","weightingFactorValue","arrsource","arrvalue","Array","valuelen","sourcelen","k","Math","abs","ran","floor","random","parseInt","x","y","o1","o2","u1","u2","arguments","PI","sqrt","pow","exp","edit","canvas","inData","console","log","cxt","getContext","curImageData","getImageData","width","height","clearRect","h","imageDataCopyData","ImageData","putImageData","parsing","funcNum","imageData","funcName","String","revColor","fade","relievo","flipHorizontal","flipVertical","blackWhite","gaussianBlur","imageData_length","red","green","blue","gray","lastR","lastG","lastB","w","middleAxle","curRow","aisleStart","aisleEnd","curMiddleAxle","tr","tg","tb","ta","rowAisles","mirrorStart","g","b","R","pxInfo","weightingfactor","curCol","calDataR","calDataG","calDataB","calDataA","index","items","opCheckList","methods","basicOP","VList","VListGroup","VListItem","VListItemContent","VListItemTitle","undo","redo","resetToOrigin","curState","opList","change","watch","computed","confirm","reset","size","getNowIndex","imgData","alert","undefined","now","VBtnToggle","VListItemGroup","VSubheader","props","source","originImgData","components","midBlock","Edits","history","VApp","VAppBar","VAppBarNavIcon","VContent","VFooter","VNavigationDrawer","VSpacer","VToolbarTitle","VToolbar","Vue","use","Vuetify","clipModule","namespaced","state","clipState","afterValidClick","boxParams","X","Y","W","H","currentX","currentY","kind","position","border","top","getters","getClipState","mutations","e","target","parentNode","id","clientX","clientY","setBoxParams","resetAll","actions","initialClip","dispatch","rootState","commit","showBottomBar","clipMask","clipFrame","initBoxSize","min","nowX","nowY","disX","disY","calLeft","calTop","calW","calH","rangeX","rangeY","rangeW","rangeH","drawTrim","maskCxt","save","fillStyle","fillRect","globalCompositeOperation","restore","exit","Promise","resolve","removeBackPart","scaleModule","scaleState","scaleRatio","curImg","imgW","imgH","getScaleState","setScaleRatio","setImgByCanvas","Image","crossOrigin","src","toDataURL","onload","complete","doScaling","edgeH","edgeW","drawImage","reScale","rate","translate","scale","sw","sh","sx","sy","dw","dh","rotateModule","rotateState","theta","getRotateState","setTheta","doRotating","reRotate","rotate","list","capacity","element","nowIndex","cap","pop","Vuex","store","Store","clip","originImgInfo","setCanvas","setEdge","storeOriginImgInfo","setToOrigin","config","productionTip","el","vuetify","render","App"],"mappings":"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","file":"js/app.b6500169.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-app',{attrs:{\"id\":\"inspire\"}},[_c('v-app-bar',{attrs:{\"app\":\"\",\"clipped-right\":\"\",\"clipped-left\":\"\",\"color\":_vm.barColor,\"dark\":\"\"}},[_c('v-app-bar-nav-icon',{on:{\"click\":function($event){$event.stopPropagation();_vm.drawer = !_vm.drawer}}}),_c('v-toolbar-title',[_vm._v(\"OnlinePS\")]),_c('v-spacer'),_c('v-app-bar-nav-icon',{on:{\"click\":function($event){$event.stopPropagation();_vm.drawerRight = !_vm.drawerRight}}})],1),_c('v-navigation-drawer',{attrs:{\"app\":\"\",\"width\":\"auto\",\"right\":\"\",\"clipped\":\"\"},model:{value:(_vm.drawerRight),callback:function ($$v) {_vm.drawerRight=$$v},expression:\"drawerRight\"}},[_c('v-list',{attrs:{\"dense\":\"\"}},[_c('v-list-item',[_c('history')],1)],1)],1),_c('v-navigation-drawer',{attrs:{\"app\":\"\",\"width\":\"auto\",\"clipped\":\"\"},model:{value:(_vm.drawer),callback:function ($$v) {_vm.drawer=$$v},expression:\"drawer\"}},[_c('v-list',{attrs:{\"dense\":\"\"}},[_c('v-list-item',[_c('Edits')],1)],1)],1),_c('v-navigation-drawer',{attrs:{\"fixed\":\"\",\"temporary\":\"\"},model:{value:(_vm.left),callback:function ($$v) {_vm.left=$$v},expression:\"left\"}}),_c('v-content',[_c('v-container',{staticClass:\"fill-height\",attrs:{\"fluid\":\"\"}},[_c('v-row',{attrs:{\"justify\":\"center\",\"align\":\"center\"}},[_c('midBlock',{on:{\"canvasReady\":_vm.canvasReady}})],1)],1)],1),_c('v-navigation-drawer',{attrs:{\"fixed\":\"\",\"right\":\"\",\"temporary\":\"\"},model:{value:(_vm.right),callback:function ($$v) {_vm.right=$$v},expression:\"right\"}}),_c('v-footer',{staticClass:\"white--text\",attrs:{\"app\":\"\",\"color\":_vm.barColor}},[_c('span',[_vm._v(\"SETeam06\")]),_c('v-spacer'),_c('span',[_vm._v(\"© 2020\")])],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-container',{attrs:{\"fluid\":\"\"},on:{\"mousedown\":function($event){return _vm.mouseDownEvent($event)},\"mousemove\":function($event){return _vm.mouseMoveEvent($event)},\"mouseup\":function($event){return _vm.mouseReleaseEvent($event)}}},[_c('v-row',[_c('v-col',{attrs:{\"cols\":\"12\"}},[_c('v-row',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.scaleState),expression:\"scaleState\"}],attrs:{\"align\":\"stretch\",\"justify\":\"center\"}},[_c('v-col',{attrs:{\"cols\":\"6\"}},[_c('v-slider',{staticClass:\"align-center\",attrs:{\"max\":_vm.max,\"min\":\"0\",\"thumb-label\":\"always\"},scopedSlots:_vm._u([{key:\"thumb-label\",fn:function(ref){\nvar value = ref.value;\nreturn [_vm._v(\" \"+_vm._s(value/100)+\"x \")]}}]),model:{value:(_vm.editScale),callback:function ($$v) {_vm.editScale=$$v},expression:\"editScale\"}})],1),_c('v-btn',{staticClass:\"mx-2\",attrs:{\"outlined\":\"\",\"fab\":\"\",\"small\":\"\",\"color\":\"indigo\"},on:{\"click\":function($event){return _vm.endScaling(1)}}},[_c('v-icon',[_vm._v(\"mdi-check\")])],1),_c('v-btn',{staticClass:\"mx-2\",attrs:{\"outlined\":\"\",\"fab\":\"\",\"small\":\"\",\"color\":\"indigo\"},on:{\"click\":function($event){return _vm.endScaling(0)}}},[_c('v-icon',[_vm._v(\"mdi-close\")])],1)],1),_c('v-row',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.rotateState),expression:\"rotateState\"}],attrs:{\"align\":\"stretch\",\"justify\":\"center\"}},[_c('v-col',{attrs:{\"cols\":\"6\"}},[_c('v-slider',{staticClass:\"align-left\",attrs:{\"max\":360,\"min\":\"0\",\"thumb-label\":\"always\"},scopedSlots:_vm._u([{key:\"thumb-label\",fn:function(ref){\nvar value = ref.value;\nreturn [_vm._v(\" \"+_vm._s(value)+\"° \")]}}]),model:{value:(_vm.editRotate),callback:function ($$v) {_vm.editRotate=$$v},expression:\"editRotate\"}})],1),_c('v-btn',{staticClass:\"mx-2\",attrs:{\"outlined\":\"\",\"fab\":\"\",\"small\":\"\",\"color\":\"indigo\"},on:{\"click\":function($event){return _vm.endRotating(1)}}},[_c('v-icon',[_vm._v(\"mdi-check\")])],1),_c('v-btn',{staticClass:\"mx-2\",attrs:{\"outlined\":\"\",\"fab\":\"\",\"small\":\"\",\"color\":\"indigo\"},on:{\"click\":function($event){return _vm.endRotating(0)}}},[_c('v-icon',[_vm._v(\"mdi-close\")])],1)],1),_c('v-row',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.clipState),expression:\"clipState\"}],attrs:{\"align\":\"stretch\",\"justify\":\"center\"}},[_c('v-btn',{staticClass:\"mx-2 my-1\",attrs:{\"outlined\":\"\",\"fab\":\"\",\"small\":\"\",\"color\":\"indigo\"},on:{\"click\":function($event){return _vm.endClip(1)}}},[_c('v-icon',[_vm._v(\"mdi-check\")])],1),_c('v-btn',{staticClass:\"mx-2 my-1\",attrs:{\"outlined\":\"\",\"fab\":\"\",\"small\":\"\",\"color\":\"indigo\"},on:{\"click\":function($event){return _vm.endClip(0)}}},[_c('v-icon',[_vm._v(\"mdi-close\")])],1)],1),_c('v-row',{staticClass:\"grey lighten-5\",attrs:{\"id\":\"canvasWrapper\",\"align\":\"center\",\"justify\":\"center\"}},[_c('img',{directives:[{name:\"show\",rawName:\"v-show\",value:(false),expression:\"false\"}],attrs:{\"crossorigin\":\"\",\"id\":\"myImg1\",\"src\":require(\"../assets/default1.png\")}}),_c('img',{directives:[{name:\"show\",rawName:\"v-show\",value:(false),expression:\"false\"}],attrs:{\"crossorigin\":\"\",\"id\":\"myImg2\",\"src\":require(\"../assets/default2.png\")}}),_c('img',{directives:[{name:\"show\",rawName:\"v-show\",value:(false),expression:\"false\"}],attrs:{\"crossorigin\":\"\",\"id\":\"myImg3\",\"src\":require(\"../assets/default3.png\")}}),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.clipState),expression:\"clipState\"}],staticStyle:{\"position\":\"absolute\",\"z-index\":\"1\"},attrs:{\"id\":\"clipFrame\"}},[_c('div',{staticStyle:{\"cursor\":\"move\"},style:([_vm.boxStyle]),attrs:{\"id\":\"box\"}},[_c('div',{staticStyle:{\"left\":\"-3px\",\"top\":\"-3px\",\"cursor\":\"nw-resize\"},style:([_vm.dotStyle]),attrs:{\"id\":\"LU\"}}),_c('div',{staticStyle:{\"left\":\"-3px\",\"bottom\":\"-3px\",\"cursor\":\"sw-resize\"},style:([_vm.dotStyle]),attrs:{\"id\":\"LD\"}}),_c('div',{staticStyle:{\"right\":\"-3px\",\"top\":\"-3px\",\"cursor\":\"ne-resize\"},style:([_vm.dotStyle]),attrs:{\"id\":\"RU\"}}),_c('div',{staticStyle:{\"right\":\"-3px\",\"bottom\":\"-3px\",\"cursor\":\"se-resize\"},style:([_vm.dotStyle]),attrs:{\"id\":\"RD\"}}),_c('div',{staticStyle:{\"top\":\"-3px\",\"left\":\"50%\",\"margin-left\":\"-3px\",\"cursor\":\"n-resize\"},style:([_vm.dotStyle]),attrs:{\"id\":\"UC\"}}),_c('div',{staticStyle:{\"bottom\":\"-3px\",\"left\":\"50%\",\"margin-left\":\"-3px\",\"cursor\":\"s-resize\"},style:([_vm.dotStyle]),attrs:{\"id\":\"DC\"}}),_c('div',{staticStyle:{\"right\":\"-3px\",\"top\":\"50%\",\"margin-top\":\"-3px\",\"cursor\":\"e-resize\"},style:([_vm.dotStyle]),attrs:{\"id\":\"RC\"}}),_c('div',{staticStyle:{\"left\":\"-3px\",\"top\":\"50%\",\"margin-top\":\"-3px\",\"cursor\":\"w-resize\"},style:([_vm.dotStyle]),attrs:{\"id\":\"LC\"}})])]),_c('canvas',{staticStyle:{\"position\":\"absolute\"},attrs:{\"id\":\"myCanvas\"}}),_c('canvas',{staticStyle:{\"position\":\"absolute\"},attrs:{\"id\":\"clipMask\"}})]),_c('v-row',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.showBottomBar),expression:\"showBottomBar\"}],attrs:{\"id\":\"barWrapper\",\"align\":\"stretch\",\"justify\":\"center\"}},[_c('v-col',{attrs:{\"cols\":\"5\"}},[(_vm.hackReset)?_c('v-select',{attrs:{\"label\":\"选择图片\",\"items\":_vm.defaultImgs,\"item-text\":\"name\",\"item-value\":\"value\",\"outlined\":\"\"},on:{\"change\":_vm.showWarningMsg},model:{value:(_vm.choice),callback:function ($$v) {_vm.choice=$$v},expression:\"choice\"}}):_vm._e()],1),_c('input',{staticStyle:{\"display\":\"none\"},attrs:{\"id\":\"uploadImg\",\"type\":\"file\"},on:{\"change\":_vm.getUserImg}}),_c('v-btn',{staticClass:\"ma-4\",on:{\"click\":_vm.download}},[_vm._v(\" 保存图片 \")])],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <v-container fluid\r\n\t@mousedown=\"mouseDownEvent($event)\"\r\n\t@mousemove=\"mouseMoveEvent($event)\"\r\n\t@mouseup=\"mouseReleaseEvent($event)\"\r\n  >\r\n\t<!-- 栅格Reference：https://vuetifyjs.com/zh-Hans/components/grids/ -->\r\n\t<v-row>\r\n\t\t<v-col cols=\"12\">\r\n\t\t\t<!-- 缩放控制条 -->\r\n\t\t\t<v-row v-show=\"scaleState\" align= \"stretch\" justify=\"center\">\r\n\t\t\t\t<v-col cols=\"6\">\r\n\t\t\t\t<v-slider\r\n\t\t\t\t\tv-model=\"editScale\"\r\n\t\t\t\t\tclass=\"align-center\"\r\n\t\t\t\t\t:max=\"max\" min=\"0\"\r\n\t\t\t\t\tthumb-label=\"always\"\r\n\t\t\t\t>\r\n\t\t\t\t<template v-slot:thumb-label=\"{ value }\">\r\n\t\t\t\t\t{{ value/100 }}x\r\n\t\t\t\t</template>\r\n\t\t\t\t</v-slider>\r\n\t\t\t\t</v-col>\r\n\t\t\t\t<v-btn v-on:click=\"endScaling(1)\" class=\"mx-2\" outlined fab small color=\"indigo\">\r\n\t\t\t\t\t<v-icon>mdi-check</v-icon>\r\n\t\t\t\t</v-btn>\r\n\t\t\t\t<v-btn v-on:click=\"endScaling(0)\" class=\"mx-2\" outlined fab small color=\"indigo\">\r\n\t\t\t\t\t<v-icon>mdi-close</v-icon>\r\n\t\t\t\t</v-btn>\r\n\t\t\t</v-row>\r\n\t\t\t\r\n\t\t\t<!-- 旋转控制条 -->\r\n\t\t\t<v-row v-show=\"rotateState\" align= \"stretch\" justify=\"center\">\r\n\t\t\t\t<v-col cols=\"6\">\r\n\t\t\t\t<v-slider\r\n\t\t\t\t\tv-model=\"editRotate\"\r\n\t\t\t\t\tclass=\"align-left\"\r\n\t\t\t\t\t:max=\"360\" min=\"0\"\r\n\t\t\t\t\tthumb-label=\"always\"\r\n\t\t\t\t>\r\n\t\t\t\t<template v-slot:thumb-label=\"{ value }\">\r\n\t\t\t\t\t{{ value }}°\r\n\t\t\t\t</template>\r\n\t\t\t\t</v-slider>\r\n\t\t\t\t</v-col>\r\n\t\t\t\t<v-btn v-on:click=\"endRotating(1)\" class=\"mx-2\" outlined fab small color=\"indigo\">\r\n\t\t\t\t\t<v-icon>mdi-check</v-icon>\r\n\t\t\t\t</v-btn>\r\n\t\t\t\t<v-btn v-on:click=\"endRotating(0)\" class=\"mx-2\" outlined fab small color=\"indigo\">\r\n\t\t\t\t\t<v-icon>mdi-close</v-icon>\r\n\t\t\t\t</v-btn>\r\n\t\t\t</v-row>\r\n\t\t\t\r\n\t\t\t<!-- 裁切控制 -->\r\n\t\t\t<v-row v-show=\"clipState\" align= \"stretch\" justify=\"center\">\r\n\t\t\t\t<v-btn v-on:click=\"endClip(1)\" class=\"mx-2 my-1\" outlined fab small color=\"indigo\">\r\n\t\t\t\t\t<v-icon>mdi-check</v-icon>\r\n\t\t\t\t</v-btn>\r\n\t\t\t\t<v-btn v-on:click=\"endClip(0)\" class=\"mx-2 my-1\" outlined fab small color=\"indigo\">\r\n\t\t\t\t\t<v-icon>mdi-close</v-icon>\r\n\t\t\t\t</v-btn>\r\n\t\t\t</v-row>\r\n\t\t\t<!-- 画布主体 -->\r\n\t\t\t<v-row id=\"canvasWrapper\" align=\"center\" justify=\"center\" class=\"grey lighten-5\">\r\n\t\t\t\t<img crossorigin=\"\" v-show=\"false\" id=\"myImg1\" src=\"../assets/default1.png\"/>\r\n\t\t\t\t<img crossorigin=\"\" v-show=\"false\" id=\"myImg2\" src=\"../assets/default2.png\"/>\r\n\t\t\t\t<img crossorigin=\"\" v-show=\"false\" id=\"myImg3\" src=\"../assets/default3.png\"/>\r\n\t\t\t\t<!-- 截图框 -->\r\n\t\t\t\t<div id=\"clipFrame\" style=\"position: absolute; z-index: 1;\" v-show=\"clipState\">\r\n\t\t\t\t\t<div id=\"box\" v-bind:style=\"[boxStyle]\" style=\"cursor: move;\">\r\n\t\t\t\t\t\t<!-- 八个控制点 -->\r\n\t\t\t\t\t\t<div id=\"LU\" style=\"left:-3px; top:-3px; cursor:nw-resize;\" \r\n\t\t\t\t\t\t\tv-bind:style=\"[dotStyle]\"></div>\r\n\t\t\t\t\t\t<div id=\"LD\" style=\"left:-3px; bottom:-3px; cursor:sw-resize;\" \r\n\t\t\t\t\t\t\tv-bind:style=\"[dotStyle]\"></div>\r\n\t\t\t\t\t\t<div id=\"RU\" style=\"right:-3px; top:-3px; cursor:ne-resize;\" \r\n\t\t\t\t\t\t\tv-bind:style=\"[dotStyle]\"></div>\r\n\t\t\t\t\t\t<div id=\"RD\" style=\"right:-3px; bottom:-3px; cursor:se-resize;\" \r\n\t\t\t\t\t\t\tv-bind:style=\"[dotStyle]\"></div>\r\n\t\t\t\t\t\t<div id=\"UC\" style=\"top:-3px; left:50%; margin-left:-3px; cursor:n-resize;\" \r\n\t\t\t\t\t\t\tv-bind:style=\"[dotStyle]\"></div>\r\n\t\t\t\t\t\t<div id=\"DC\" style=\"bottom:-3px; left:50%; margin-left:-3px; cursor:s-resize;\" \r\n\t\t\t\t\t\t\tv-bind:style=\"[dotStyle]\"></div>\r\n\t\t\t\t\t\t<div id=\"RC\" style=\"right:-3px; top:50%; margin-top:-3px; cursor:e-resize;\" \r\n\t\t\t\t\t\t\tv-bind:style=\"[dotStyle]\"></div>\r\n\t\t\t\t\t\t<div id=\"LC\" style=\"left:-3px; top:50%; margin-top:-3px; cursor:w-resize;\" \r\n\t\t\t\t\t\t\tv-bind:style=\"[dotStyle]\"></div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<canvas id=\"myCanvas\" style=\"position: absolute;\"></canvas>\r\n\t\t\t\t<canvas id=\"clipMask\" style=\"position: absolute;\"></canvas>\r\n\t\t\t</v-row>\r\n\t\t\t<v-row id=\"barWrapper\" align= \"stretch\" justify=\"center\" v-show=\"showBottomBar\">\r\n\t\t\t\t<v-col cols=\"5\">\r\n\t\t\t\t\t<v-select label=\"选择图片\"\r\n\t\t\t\t\t\tv-model=\"choice\" v-if=\"hackReset\"\r\n\t\t\t\t\t\t:items=\"defaultImgs\" \r\n\t\t\t\t\t\titem-text=\"name\"\r\n\t\t\t\t\t\titem-value=\"value\"\r\n\t\t\t\t\t\toutlined\r\n\t\t\t\t\t\t@change=\"showWarningMsg\" \r\n\t\t\t\t\t></v-select>\r\n\t\t\t\t</v-col>\r\n\t\t\t\t<input id=\"uploadImg\" type=\"file\" style=\"display: none\" v-on:change=\"getUserImg\"/>\r\n\t\t\t\t<v-btn v-on:click=\"download\" class=\"ma-4\">\r\n\t\t\t\t\t保存图片\r\n\t\t\t\t</v-btn>\r\n\t\t\t</v-row>\r\n\t\t</v-col>\r\n\t</v-row>\r\n  </v-container>\r\n</template>\r\n\r\n<script>\r\nimport { mapState, mapMutations, mapActions } from 'vuex';\r\n\r\nexport default {\r\n    name: 'midBlock',\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tchoice: 1,\r\n\t\t\tlastChoice: 1,\r\n\t\t\tconfirmChange: true,\r\n\t\t\tdefaultImgs: [\r\n\t\t\t\t{name: 'flower', value: 1},\r\n\t\t\t\t{name: 'nature', value: 2},\r\n\t\t\t\t{name: 'person', value: 3},\r\n\t\t\t\t{name: 'custom', value: 0},\r\n\t\t\t],\r\n\t\t\tfirstCallHandler: true, // 组织循环触发\r\n\t\t\thackReset: true,\t\t// 强制select组件重新渲染\r\n\t\t\tdotStyle: { // 截图框控制点共用样式\r\n\t\t\t\tposition:'absolute',\r\n\t\t\t\twidth:'6px',\r\n\t\t\t\theight:'6px',\r\n\t\t\t\tborder:'1px solid #000',\r\n\t\t\t\tbackground:'white',\r\n\t\t\t\toverflow:'hidden'\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\twatch: {\r\n\t\tchoice: {\r\n\t\t\thandler(curVal, oldVal) {\r\n\t\t\t\t/* \r\n\t\t\t\t\t监听v-select组件的变化\r\n\t\t\t\t\t\t若确认修改图片，调用修改函数\r\n\t\t\t\t\t\t否则，选框重新渲染，恢复旧值\r\n\t\t\t\t*/\r\n\t\t\t\tconsole.log('监听到改变: ',curVal, oldVal, \r\n\t\t\t\t\t\t\t'用户是否确认改变: ',this.confirmChange);\r\n\t\t\t\tthis.lastChoice = oldVal;\r\n\t\t\t\tif (this.confirmChange)\t{\t// 确认修改，调用修改函数\r\n\t\t\t\t\tthis.changeImg(curVal);\r\n\t\t\t\t}\r\n\t\t\t\telse if (this.firstCallHandler) {\r\n\t\t\t\t\tthis.firstCallHandler = false;\r\n\t\t\t\t\tthis.choice = this.lastChoice;\t// 恢复旧值\r\n\t\t\t\t\tthis.hackReset = false;\t\t// 选框重新渲染\r\n\t\t\t\t\tthis.$nextTick(() => {\r\n\t\t\t\t\t\tthis.hackReset = true\r\n\t\t\t\t\t});\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.firstCallHandler = true;\t// 重置\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\teditScale: {\r\n\t\t\thandler() {\r\n\t\t\t\t/*\r\n\t\t\t\t\t监听v-slider组件的变化，实现图片缩放的重新渲染\r\n\t\t\t\t*/\r\n\t\t\t\tthis.reScale()\r\n\t\t\t}\r\n\t\t},\r\n\t\teditRotate: {\r\n\t\t\thandler() {\r\n\t\t\t\t/*\r\n\t\t\t\t\t监听v-slider组件的变化，实现图片旋转的重新渲染\r\n\t\t\t\t*/\r\n\t\t\t\tthis.reRotate()\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tcomputed: {\r\n\t\t...mapState([\t// 全局变量\r\n\t\t\t'opList', 'canvas', 'cxt', 'clipMask', 'maskCxt',\r\n\t\t\t'edgeW', 'edgeH', 'showBottomBar'\r\n\t\t]),\r\n\t\t...mapState('clip', [\r\n\t\t\t'clipState', 'boxStyle', 'boxStyle',\r\n\t\t]),\r\n\t\t...mapState('scale', [\r\n\t\t\t'scaleState', 'scaleRatio', 'max'\r\n\t\t]),\r\n\t\t...mapState('rotate', [\r\n\t\t\t'rotateState', 'theta'\r\n\t\t]),\r\n\t\teditScale: {\r\n\t\t\tget() {\r\n\t\t\t\treturn this.scaleRatio;\r\n\t\t\t},\r\n\t\t\tset(e) {\r\n\t\t\t\tthis.setScaleRatio(e);\r\n\t\t\t}\r\n\t\t},\r\n\t\teditRotate: {\r\n\t\t\tget() {\r\n\t\t\t\treturn this.theta;\r\n\t\t\t},\r\n\t\t\tset(e) {\r\n\t\t\t\tthis.setTheta(e);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tmounted: async function(){\r\n\t\tconsole.log('进入图片预设函数');\r\n\t\t\r\n\t\tvar canvasDiv = document.getElementById(\"canvasWrapper\");\r\n\t\tvar cont = document.getElementsByClassName(\"v-content__wrap\");\r\n\t\tconsole.log(cont)\r\n\t\t// var barDiv = document.getElementById(\"barWrapper\");\r\n\t\tcanvasDiv.style.height = (cont[0].clientHeight - 170) + \"px\";\r\n\t\tthis.setEdge({'edgeH': cont[0].clientHeight - 220, 'edgeW': cont[0].clientWidth})\r\n\t\t\r\n\t\tvar canvas = document.getElementById(\"myCanvas\");\r\n\t\tvar clipMask = document.getElementById(\"clipMask\");\r\n\t\tvar clipFrame = document.getElementById(\"clipFrame\");\r\n\t\tif(canvas.getContext) {\r\n\t\t\tconsole.log('浏览器支持Canvas!');\r\n\t\t\tvar cxt = canvas.getContext('2d');\r\n\t\t\tvar maskCxt = clipMask.getContext('2d');\r\n\t\t\tthis.setCanvas({\r\n\t\t\t\tcanvas: canvas, cxt: cxt, \r\n\t\t\t\tclipMask: clipMask, maskCxt: maskCxt,\r\n\t\t\t\tclipFrame: clipFrame\r\n\t\t\t});\t// 将画布与接口设为全局变量\r\n\t\t\tconsole.log('画布与接口初始化完成');\r\n\t\t\tawait this.fillCanvas(1, this.callback);  // 图片绘制到画布上\r\n\t\t\tconsole.log('画布准备完毕', this.canvas, this.cxt);\r\n\t\t\tthis.storeOriginImgInfo();\r\n\t\t\tthis.$emit('canvasReady'); // 通知父组件画布准备完毕\r\n\t\t}\r\n\t\telse {\r\n\t\t\talert('抱歉，您的浏览器不支持Canvas，请更新版本后重试');\r\n\t\t}\r\n\t},\r\n\tmethods: {\r\n\t\t...mapMutations([\t// 全局方法\r\n\t\t\t'setCanvas', 'storeOriginImgInfo', 'setEdge'\r\n\t\t]),\r\n\t\t...mapMutations('clip',[\r\n\t\t\t'mouseDownEvent',\r\n\t\t]),\r\n\t\t...mapMutations('scale',[\r\n\t\t\t'setScaleRatio',\r\n\t\t]),\r\n\t\t...mapMutations('rotate',[\r\n\t\t\t'setTheta',\r\n\t\t]),\r\n\t\t...mapActions('clip',[\r\n\t\t\t'mouseMoveEvent',\r\n\t\t\t'mouseReleaseEvent',\r\n\t\t\t'endClip'\r\n\t\t]),\r\n\t\t...mapActions('scale',[\r\n\t\t\t'reScale', 'endScaling'\r\n\t\t]),\r\n\t\t...mapActions('rotate',[\r\n\t\t\t'reRotate', 'endRotating'\r\n\t\t]),\r\n\t\t// ============================== 顶层功能函数  ============================== \r\n\t\tdownload() {\r\n\t\t\t// 图片下载（待完善）\r\n\t\t\tconsole.log('图片下载到本地');\r\n\t\t\tvar aTag = document.createElement('a');\r\n\t\t\tthis.canvas.toBlob(function(blob) {\r\n\t\t\t\taTag.download = 'imgFile.jpg';\r\n\t\t\t\taTag.href = URL.createObjectURL(blob);\r\n\t\t\t\taTag.click();\r\n\t\t\t}, \"image/jpeg\", 1.0);\r\n\t\t},\r\n\t\tgetUserImg: async function () {\r\n\t\t\t/* \r\n\t\t\t\t读取用户上传的图片并转码\r\n\t\t\t\t将新图片更新到画布上，并传回给父组件\r\n\t\t\t*/\r\n\t\t\tvar fileInput = document.getElementById(\"uploadImg\");\r\n\t\t\tif (fileInput.files.length == 0) {\r\n\t\t\t\tconsole.log('没有可用文件');\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\t// 等待转码结果返回\r\n\t\t\tvar rawImgData = undefined;\r\n\t\t\tawait this.getRawImgData(fileInput.files[0]).then(function (res) {\r\n\t\t\t\trawImgData = res;\r\n\t\t\t});\r\n\t\t\t// 将新图片写入画布\r\n\t\t\tthis.changeImg(rawImgData);\r\n\t\t},\r\n\t\t// ================================ 1级 辅助函数  ==============================\r\n\t\tshowWarningMsg () {\r\n\t\t\t// 更改图片前发出确认提示\r\n\t\t\tthis.confirmChange = confirm(\"更改图片后，当前画布上的图片将会丢失，是否确认？\");\r\n\t\t},\r\n\t\tgetRawImgData (file) {\r\n\t\t\t// 功能：读取用户上传的图片并转码\r\n\t\t\treturn new Promise((resolve) => {\r\n\t\t\t\tvar reader = new FileReader();\r\n\t\t\t\t// 以DataURL的形式读取文件, 发起一个异步操作来读取文件内容\r\n\t\t\t\treader.readAsDataURL(file);\r\n\t\t\t\treader.onload = function(e) {  // 文件读取完后调用\r\n\t\t\t\t\tresolve(e.target.result);\t// 返回转码结果\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\tchangeImg: async function (newImgSrc) {\r\n\t\t\t/*\r\n\t\t\t\t功能：将新图片更新到画布上，并传回给父组件\r\n\t\t\t\tnewImgSrc:\r\n\t\t\t\t\tcase1: 当用户选择上传自定义图片时，取值为 0；\r\n\t\t\t\t\tcase2：当用户选择默认图时，取值为默认图编号；[1,2,3]\r\n\t\t\t\t\tcase3：当用户的自定义图片转码成功后，取值为图片编码；[data:image/jpeg/...base64]\r\n\t\t\t*/\r\n\t\t\tthis.opList.clear();\t// 清空历史记录\r\n\t\t\t\r\n\t\t\tif (newImgSrc == 0) { // case1，点击触发input元素\r\n\t\t\t\tdocument.getElementById(\"uploadImg\").click();\r\n\t\t\t}\r\n\t\t\tawait this.fillCanvas(newImgSrc, this.callback);  // 图片绘制到画布上\r\n\t\t\tconsole.log('画布准备完毕', this.canvas, this.cxt);\r\n\t\t\tthis.storeOriginImgInfo();\r\n\t\t\tthis.$emit('canvasReady'); // 通知父组件画布准备完毕\r\n\t\t},\r\n\t\t// ================================ 次级 辅助函数  ============================== \r\n\t\tfillCanvas (imgSrc, callback) {\r\n\t\t\t// 辅助changeImg函数：将新图片更新到画布上\r\n\t\t\treturn new Promise((resolve) => {\r\n\t\t\t\tvar img = undefined;\r\n\t\t\t\tif (imgSrc == 1 || imgSrc == 2 || imgSrc == 3) { // 处理case2\r\n\t\t\t\t\timg = document.getElementById(\"myImg\" + imgSrc);\r\n\t\t\t\t}\r\n\t\t\t\telse { // 处理case3\r\n\t\t\t\t\timg = new Image();\r\n\t\t\t\t\timg.crossOrigin = '';\r\n\t\t\t\t\timg.src = imgSrc;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t// 兼容性图片onload事件\r\n\t\t\t\timg.onload = function(){\r\n\t\t\t\t\tconsole.log('调用onload');\r\n\t\t\t\t\tcallback(img);\r\n\t\t\t\t\tresolve();\r\n\t\t\t\t}\r\n\t\t\t\tif (img.complete) {\r\n\t\t\t\t\tconsole.log('调用complete');\r\n\t\t\t\t\tcallback(img);\r\n\t\t\t\t\tresolve();\t// 跳过onload直接返回\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\tcallback (img) {\r\n\t\t\t/*\r\n\t\t\t\tfillCanvas的回调函数\r\n\t\t\t\t- 画布清空\r\n\t\t\t\t- 如果新图片超过屏幕大小，缩小图片\r\n\t\t\t\t- 将画布大小与新图片大小设为一致\r\n\t\t\t\t- 绘制图片\r\n\t\t\t*/\r\n\t\t\tconsole.log('清空画布');\r\n\t\t\tthis.cxt.clearRect(0, 0, this.canvas.offsetWidth, this.canvas.offsetHeight);\r\n\t\t\t// 判断是否需要缩小图片，计算宽高比不变的前提下的缩小比率\r\n\t\t\tthis.canvas.width = Math.min(this.edgeW, img.width);\r\n\t\t\tthis.canvas.height = Math.min(this.edgeH, img.height);\r\n\t\t\tvar xRate = this.canvas.width / img.width;\r\n\t\t\tvar yRate = this.canvas.height / img.height;\r\n\t\t\tvar setRate = xRate < yRate ? xRate : yRate;\r\n\t\t\tsetRate = Math.min(1, setRate); // 允许缩小，不允许放大\r\n\t\t\t\r\n\t\t\t// 计算调整后的图片大小\r\n\t\t\tvar dW = img.width * setRate; \r\n\t\t\tvar dH = img.height * setRate;\r\n\t\t\t\r\n\t\t\t// 设置画布大小和图片一致\r\n\t\t\tthis.canvas.width = dW; \r\n\t\t\tthis.canvas.height = dH;\r\n\t\t\t\r\n\t\t\t// 绘制\r\n\t\t\tthis.cxt.drawImage(img, 0, 0, dW, dH);\r\n\t\t\tconsole.log('画布绘制完成');\r\n\t\t},\r\n\t},\r\n  }\r\n</script>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/vuetify-loader/lib/loader.js??ref--18-0!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./midBlock.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/vuetify-loader/lib/loader.js??ref--18-0!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./midBlock.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./midBlock.vue?vue&type=template&id=48f8872e&\"\nimport script from \"./midBlock.vue?vue&type=script&lang=js&\"\nexport * from \"./midBlock.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VCol } from 'vuetify/lib/components/VGrid';\nimport { VContainer } from 'vuetify/lib/components/VGrid';\nimport { VIcon } from 'vuetify/lib/components/VIcon';\nimport { VRow } from 'vuetify/lib/components/VGrid';\nimport { VSelect } from 'vuetify/lib/components/VSelect';\nimport { VSlider } from 'vuetify/lib/components/VSlider';\ninstallComponents(component, {VBtn,VCol,VContainer,VIcon,VRow,VSelect,VSlider})\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-container',{attrs:{\"fluid\":\"\"}},[_c('v-list',_vm._l((_vm.items),function(item){return _c('v-list-group',{key:item.title,attrs:{\"prepend-icon\":item.icon,\"no-action\":\"\"},scopedSlots:_vm._u([{key:\"activator\",fn:function(){return [_c('v-list-item-content',[_c('v-list-item-title',{domProps:{\"textContent\":_vm._s(item.title)}})],1)]},proxy:true}],null,true)},_vm._l((item.items),function(subItem){return _c('v-list-item',{key:subItem.title,on:{\"click\":function($event){return subItem.action(subItem.funcId)}}},[_c('v-list-item-content',[_c('v-list-item-title',{domProps:{\"textContent\":_vm._s(subItem.title)}})],1)],1)}),1)}),1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","/*\r\n * 实际权重(令结果权重总和为1)\r\n */\r\nconst weightingFactor = function (arr) {\r\n    var newarr = [];\r\n    var account = 0;\r\n    for (var i = 0; i < arr.length; i++) {\r\n        var val = GaussianDistribution(arr[i][0], arr[i][1], 1.5, 1.5);\r\n        account += val;\r\n        newarr.push(val);\r\n    }\r\n    for (var j = 0; j < newarr.length; j++) {\r\n        newarr[j] /= account;\r\n    }\r\n    return newarr;\r\n};\r\n\r\n/*\r\n * 创建以当前点为原点，半径为X的方阵数组\r\n */\r\nconst createMartixArray = function (num) {\r\n    var arr = [];\r\n    for (var rows = -num; rows <= num; rows++) {\r\n        for (var cols = -num; cols <= num; cols++) {\r\n            arr.push([rows, cols]);\r\n        }\r\n    }\r\n    return arr;\r\n};\r\n\r\n/*\r\n * 权重计算得到的值\r\n */\r\nconst weightingFactorValue = function (arrsource, arrvalue) {\r\n    if (false == arrvalue instanceof Array) {\r\n        throw \"nedd an array\";\r\n    }\r\n    var valuelen = arrvalue.length;\r\n    var sourcelen = arrsource.length;\r\n    // 如果像素点不足，则以附近点补上\r\n    if (valuelen < sourcelen) {\r\n        for (var k = 0; k < Math.abs(valuelen - sourcelen); k++) {\r\n            var ran = Math.floor(Math.random() * valuelen);\r\n            arrvalue.push(arrvalue[ran]);\r\n        }\r\n    }\r\n    var val = 0;\r\n    for (var i = 0; i < sourcelen; i++) {\r\n        val += arrvalue[i] * arrsource[i];\r\n    }\r\n    return parseInt(val);\r\n};\r\n\r\n/*\r\n * 二维正态分布\r\n */\r\nconst GaussianDistribution = function (x, y, o1, o2, u1 = 0, u2 = 0, p = 0) {\r\n    if (arguments.length < 4) {\r\n        throw \"参数长度至少4个！\";\r\n    } else {\r\n        for (let i = 0; i < arguments.length; i++) {\r\n            if (typeof arguments[i] !== \"number\") {\r\n                throw \"请确保参数类型为数字！\";\r\n            }\r\n        }\r\n    }\r\n    return (\r\n        (1 / (2 * Math.PI * o1 * o2 * Math.sqrt(1 - Math.pow(p, 2)))) *\r\n        Math.exp(\r\n            (-1 / (2 * (1 - Math.pow(p, 2)))) *\r\n            (Math.pow(x - u1, 2) / Math.pow(o1, 2) -\r\n                ((2 * p * (x - u1) * (y - u2)) / 2) * o1 * o2 +\r\n                Math.pow(y - u2, 2) / Math.pow(o2, 2))\r\n        )\r\n    );\r\n};\r\n\r\nexport { weightingFactor, createMartixArray, weightingFactorValue }","import { weightingFactor, createMartixArray, weightingFactorValue } from \"./maths.js\"\r\n\r\nfunction edit(canvas, inData) {\r\n\tconsole.log('重设');\r\n\tvar cxt = canvas.getContext(\"2d\");\r\n\tvar curImageData = cxt.getImageData(0, 0, canvas.width, canvas.height);\r\n\tcxt.clearRect(0, 0, canvas.width, canvas.h);\r\n\tvar imageDataCopyData = new ImageData(curImageData.data, curImageData.width, curImageData.height);\r\n\t\r\n\tcanvas.width = inData.width;\r\n\tcanvas.height = inData.height;\r\n\tcxt.putImageData(inData, 0, 0);\r\n\treturn imageDataCopyData;\r\n}\r\n\r\nfunction parsing(canvas, funcNum) {\r\n\tvar cxt = canvas.getContext(\"2d\");\r\n\tvar imageData = cxt.getImageData(0, 0, canvas.width, canvas.height);\r\n\t// var imageDataCopyData = new Uint8ClampedArray(imageData.data);\r\n\tvar funcName = new String\r\n\tswitch (funcNum) {\r\n\t\tcase 0:\r\n\t\t\trevColor(cxt, imageData);\r\n\t\t\tfuncName = \"色彩反转\"\r\n\t\t\tbreak;\r\n\t\tcase 1:\r\n\t\t\tfade(cxt, imageData);\r\n\t\t\tfuncName = \"去色\"\r\n\t\t\tbreak;\r\n\t\tcase 2:\r\n\t\t\trelievo(cxt, imageData);\r\n\t\t\tfuncName = \"浮雕\"\r\n\t\t\tbreak;\r\n\t\tcase 3:\r\n\t\t\tflipHorizontal(cxt, imageData)\r\n\t\t\tfuncName = \"水平翻转\"\r\n\t\t\tbreak;\r\n\t\tcase 4:\r\n\t\t\tflipVertical(cxt, imageData)\r\n\t\t\tfuncName = \"垂直翻转\"\r\n\t\t\tbreak;\r\n\t\tcase 5:\r\n\t\t\tblackWhite(cxt, imageData)\r\n\t\t\tfuncName = \"黑白\"\r\n\t\t\tbreak;\r\n\t\tcase 6:\r\n\t\t\tgaussianBlur(cxt, imageData)\r\n\t\t\tfuncName = \"高斯模糊\"\r\n\t\t\tbreak;\r\n\t\tcase 7:\r\n\t\t\tfuncName = \"自由裁剪\"\r\n\t\t\tbreak;\r\n\t\tcase 8:\r\n\t\t\tfuncName = \"缩放\"\r\n\t\t\tbreak;\r\n\t\tcase 9:\r\n\t\t\tfuncName = \"旋转\"\r\n\t\t\tbreak;\r\n\t\tdefault:\r\n\t\t\tconsole.log('未定义的功能');\r\n\t\t\tbreak;\r\n\t}\r\n\treturn { data: imageData, name: funcName }; // 返回变化后的数据\r\n}\r\n\r\nfunction revColor(cxt, imageData) {\r\n\tconsole.log('图片色彩反转');\r\n\tvar imageData_length = imageData.data.length / 4;\r\n\tfor (var i = 0; i < imageData_length; i++) {\r\n\t\timageData.data[i * 4] = 255 - imageData.data[i * 4];\r\n\t\timageData.data[i * 4 + 1] = 255 - imageData.data[i * 4 + 1];\r\n\t\timageData.data[i * 4 + 2] = 255 - imageData.data[i * 4 + 2];\r\n\t}\r\n\tcxt.putImageData(imageData, 0, 0);\r\n}\r\n\r\nfunction fade(cxt, imageData) {\r\n\tconsole.log('去色');\r\n\t// 也称灰度\r\n\tvar imageData_length = imageData.data.length / 4;\r\n\tfor (var i = 0; i < imageData_length; i++) {\r\n\t\tvar red = imageData.data[i * 4];\r\n\t\tvar green = imageData.data[i * 4 + 1];\r\n\t\tvar blue = imageData.data[i * 4 + 2];\r\n\t\tvar gray = 0.3 * red + 0.59 * green + 0.11 * blue;\r\n\t\timageData.data[i * 4] = gray;\r\n\t\timageData.data[i * 4 + 1] = gray;\r\n\t\timageData.data[i * 4 + 2] = gray;\r\n\t}\r\n\tcxt.putImageData(imageData, 0, 0);\r\n}\r\n\r\nfunction relievo(cxt, imageData) {\r\n\tconsole.log('浮雕');\r\n\tvar lastR = imageData.data[0], lastG = imageData.data[1], lastB = imageData.data[2];\r\n\tvar imageData_length = imageData.data.length / 4;\r\n\tfor (var i = 0; i < imageData_length; i++) {\r\n\t\tvar red = imageData.data[i * 4];\r\n\t\tvar green = imageData.data[i * 4 + 1];\r\n\t\tvar blue = imageData.data[i * 4 + 2];\r\n\t\timageData.data[i * 4] += (128 - lastR);\r\n\t\timageData.data[i * 4 + 1] += (128 - lastG);\r\n\t\timageData.data[i * 4 + 2] += (128 - lastB);\r\n\t\tlastR = red;\r\n\t\tlastG = green;\r\n\t\tlastB = blue;\r\n\t}\r\n\tcxt.putImageData(imageData, 0, 0);\r\n}\r\n\r\nfunction flipHorizontal(cxt, imageData) {\r\n\tconsole.log('水平翻转')\r\n\r\n\tconst w = imageData.width\r\n\tconst h = imageData.height\r\n\tlet middleAxle = (w * 4) / 2;\r\n\r\n\t// 2.遍历每一行作为外循环\r\n\tfor (let curRow = 0; curRow < h; curRow++) {\r\n\t\t// 每行开始的通道位置\r\n\t\tlet aisleStart = curRow * w * 4,\r\n\t\t\t// 每行结束的通道位置\r\n\t\t\taisleEnd = (curRow + 1) * w * 4 - 4;\r\n\t\t// 每一行中轴所在的位置\r\n\t\tlet curMiddleAxle = aisleEnd - middleAxle;\r\n\r\n\t\t// 3.遍历当前行的列作为内循环,把列的左边像素按照轴对称和右边的像素互换\r\n\t\tfor (; aisleStart <= curMiddleAxle; aisleStart += 4, aisleEnd -= 4) {\r\n\t\t\t// 临时存放\r\n\t\t\tlet tr = imageData.data[aisleStart],\r\n\t\t\t\ttg = imageData.data[aisleStart + 1],\r\n\t\t\t\ttb = imageData.data[aisleStart + 2],\r\n\t\t\t\tta = imageData.data[aisleStart + 3];\r\n\r\n\t\t\timageData.data[aisleStart] = imageData.data[aisleEnd];\r\n\t\t\timageData.data[aisleStart + 1] = imageData.data[aisleEnd + 1];\r\n\t\t\timageData.data[aisleStart + 2] = imageData.data[aisleEnd + 2];\r\n\t\t\timageData.data[aisleStart + 3] = imageData.data[aisleEnd + 3];\r\n\r\n\t\t\timageData.data[aisleEnd] = tr;\r\n\t\t\timageData.data[aisleEnd + 1] = tg;\r\n\t\t\timageData.data[aisleEnd + 2] = tb;\r\n\t\t\timageData.data[aisleEnd + 3] = ta;\r\n\t\t}\r\n\t}\r\n\r\n\tcxt.putImageData(imageData, 0, 0);\r\n}\r\n\r\n\r\nfunction flipVertical(cxt, imageData) {\r\n\tconsole.log('垂直翻转')\r\n\r\n\tconst w = imageData.width\r\n\tconst h = imageData.height\r\n\tlet middleAxle = Math.floor(h / 2),\r\n\t\trowAisles = w * 4;\r\n\r\n\t// 2.遍历总行数一半的每一行作为外循环(向下取整)\r\n\tfor (var curRow = 0; curRow < middleAxle; curRow++) {\r\n\t\t// 开始的通道位置\r\n\t\tlet aisleStart = curRow * rowAisles,\r\n\t\t\t// 镜像对称的开始位置\r\n\t\t\tmirrorStart = (h - curRow - 1) * rowAisles;\r\n\r\n\t\t// 3.遍历当前行的列作为内循环,把列的每个通道按照水平轴对称和镜像里的通道互换\r\n\t\tfor (\r\n\t\t\t;\r\n\t\t\taisleStart < rowAisles * (curRow + 1);\r\n\t\t\taisleStart += 4, mirrorStart += 4\r\n\t\t) {\r\n\t\t\tvar tr = imageData.data[aisleStart],\r\n\t\t\t\ttg = imageData.data[aisleStart + 1],\r\n\t\t\t\ttb = imageData.data[aisleStart + 2],\r\n\t\t\t\tta = imageData.data[aisleStart + 3];\r\n\r\n\t\t\timageData.data[aisleStart] = imageData.data[mirrorStart];\r\n\t\t\timageData.data[aisleStart + 1] = imageData.data[mirrorStart + 1];\r\n\t\t\timageData.data[aisleStart + 2] = imageData.data[mirrorStart + 2];\r\n\t\t\timageData.data[aisleStart + 3] = imageData.data[mirrorStart + 3];\r\n\r\n\t\t\timageData.data[mirrorStart] = tr;\r\n\t\t\timageData.data[mirrorStart + 1] = tg;\r\n\t\t\timageData.data[mirrorStart + 2] = tb;\r\n\t\t\timageData.data[mirrorStart + 3] = ta;\r\n\t\t}\r\n\t}\r\n\r\n\t// 4.把处理后的像素信息放回画布\r\n\tcxt.putImageData(imageData, 0, 0);\r\n}\r\n\r\nfunction blackWhite(cxt, imageData) {\r\n\t// 1.获取图像信息\r\n\tconsole.log('黑白')\r\n\r\n\tlet imageData_length = imageData.data.length;\r\n\r\n\t// 2.遍历每一个像素\r\n\tfor (let i = 0; i < imageData_length; i += 4) {\r\n\t\t// 3.将每个像素的所有通道的值按权平均,和中性灰的色值进行对比\r\n\t\t// 当前的r,g,b色值\r\n\t\tlet r = imageData.data[i],\r\n\t\t\tg = imageData.data[i + 1],\r\n\t\t\tb = imageData.data[i + 2];\r\n\r\n\t\t// 计算结果值\r\n\t\tlet val = parseInt(r * 0.3 + g * 0.59 + b * 0.11) >= 128 ? 255 : 0;\r\n\t\t// 黑白后的r,g,b色值\r\n\t\timageData.data[i] = val;\r\n\t\timageData.data[i + 1] = val;\r\n\t\timageData.data[i + 2] = val;\r\n\t}\r\n\r\n\t// 4.把处理后的像素信息放回画布\r\n\tcxt.putImageData(imageData, 0, 0);\r\n}\r\n\r\nfunction gaussianBlur(cxt, imageData, R = 1) {\r\n\t// 1.获取图像信息\r\n\tconsole.log('高斯模糊')\r\n\tconst w = imageData.width\r\n\tconst h = imageData.height\r\n\t// 图像的通道集合\r\n\tvar pxInfo = imageData.data;\r\n\r\n\t// 2.根据模糊半径求得周边每个点的权重\r\n\tvar weightingfactor = weightingFactor(createMartixArray(R));\r\n\r\n\t// 3.遍历每一行\r\n\tfor (let curRow = 0; curRow < h; curRow++) {\r\n\t\t// 4.在当前行内遍历列的每个点\r\n\t\tfor (let curCol = 0; curCol < w; curCol++) {\r\n\t\t\t// 5.在当前点遍历周边所有像素点,以通道作为新的集合\r\n\t\t\tvar calDataR = [], // 周围红通道的集合\r\n\t\t\t\tcalDataG = [], // 周围绿通道的集合\r\n\t\t\t\tcalDataB = [], // 周围蓝通道的集合\r\n\t\t\t\tcalDataA = []; // 周围Alpha通道的集合\r\n\t\t\t// 获取周边像素信息的行\r\n\t\t\tfor (let i = -Math.abs(R); i <= Math.abs(R); i++) {\r\n\t\t\t\tif (curRow + i < 0 || curRow + i >= h) {\r\n\t\t\t\t\t// 若超出行边界，跳过\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t\t// 获取周边像素所有通道的集合\r\n\t\t\t\tfor (let j = -Math.abs(R); j <= Math.abs(R); j++) {\r\n\t\t\t\t\tif (curCol + j < 0 || curCol + j >= w) {\r\n\t\t\t\t\t\t// 若超出列边界，跳过\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvar index = ((curRow + i) * w + curCol + j) * 4;\r\n\t\t\t\t\tcalDataR.push(pxInfo[index]);\r\n\t\t\t\t\tcalDataG.push(pxInfo[index + 1]);\r\n\t\t\t\t\tcalDataB.push(pxInfo[index + 2]);\r\n\t\t\t\t\tcalDataA.push(pxInfo[index + 3]);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t// 6.对每个通道进行权重值的计算\r\n\t\t\timageData.data[(curRow * w + curCol) * 4] = weightingFactorValue(\r\n\t\t\t\tweightingfactor,\r\n\t\t\t\tcalDataR\r\n\t\t\t);\r\n\t\t\timageData.data[(curRow * w + curCol) * 4 + 1] = weightingFactorValue(\r\n\t\t\t\tweightingfactor,\r\n\t\t\t\tcalDataG\r\n\t\t\t);\r\n\t\t\timageData.data[(curRow * w + curCol) * 4 + 2] = weightingFactorValue(\r\n\t\t\t\tweightingfactor,\r\n\t\t\t\tcalDataB\r\n\t\t\t);\r\n\t\t\timageData.data[(curRow * w + curCol) * 4 + 3] = weightingFactorValue(\r\n\t\t\t\tweightingfactor,\r\n\t\t\t\tcalDataA\r\n\t\t\t);\r\n\t\t}\r\n\t}\r\n\r\n\t// 7.把处理后的像素信息放回画布\r\n\tcxt.putImageData(imageData, 0, 0);\r\n}\r\n\r\n\r\nexport {\r\n\tparsing,\r\n\tedit\r\n}","<template>\r\n  <v-container fluid>\r\n    <!-- 功能抽屉 -->\r\n    <v-list>\r\n      <v-list-group v-for=\"item in items\" :key=\"item.title\" :prepend-icon=\"item.icon\" no-action>\r\n        <template v-slot:activator>\r\n          <v-list-item-content>\r\n            <v-list-item-title v-text=\"item.title\"></v-list-item-title>\r\n          </v-list-item-content>\r\n        </template>\r\n\r\n        <v-list-item\r\n          v-for=\"subItem in item.items\"\r\n          :key=\"subItem.title\"\r\n          @click=\"subItem.action(subItem.funcId)\"\r\n        >\r\n          <v-list-item-content>\r\n            <v-list-item-title v-text=\"subItem.title\"></v-list-item-title>\r\n          </v-list-item-content>\r\n        </v-list-item>\r\n      </v-list-group>\r\n    </v-list>\r\n  </v-container>\r\n</template>\r\n\r\n<script>\r\nimport { parsing } from \"../js/operator\";\r\nimport { mapState, mapGetters, mapActions } from 'vuex';\r\n\r\nexport default {\r\n\tname: \"Edits\",\r\n\tcomputed: {\r\n\t...mapState({\t// 全局变量\r\n\t\t// root\r\n\t\topList: state => state.opList,\r\n\t\tcanvas: state => state.canvas,\r\n\t\tcxt: state => state.cxt,\r\n\t\t\r\n\t\t// 裁剪相关\r\n\t\tclipState: state => state.clip.clipState,\r\n\t\t\r\n\t\t// 缩放相关\r\n\t\tscaleState: state => state.scale.scaleState,\r\n\t\tscaleRatio: state => state.scale.scaleRatio,\r\n\t\t\r\n\t\t// 旋转相关\r\n\t\trotateState: state => state.rotate.rotateState,\r\n\t}),\r\n  },\r\n  data() {\r\n    return {\r\n      items: [\r\n        {\r\n          icon: \"mdi-pencil\",\r\n          title: \"基础编辑\",\r\n          items: [\r\n            { title: \"水平翻转\", action: this.basicOP, funcId: 3},\r\n            { title: \"垂直翻转\", action: this.basicOP, funcId: 4},\r\n\t\t\t{ title: \"自由裁剪\", action: this.clipping, funcId: 7},\r\n\t\t\t{ title: \"缩放\", action: this.scaling, funcId: 8},\r\n\t\t\t{ title: \"旋转\", action: this.rotating, funcId: 9},\r\n          ]\r\n        },\r\n        {\r\n          icon: \"mdi-pencil\",\r\n          title: \"风格编辑\",\r\n          items: [\r\n            { title: \"色彩反转\", action: this.basicOP, funcId: 0},\r\n            { title: \"去色\", action: this.basicOP, funcId: 1},\r\n            { title: \"浮雕\", action: this.basicOP, funcId: 2},\r\n\t\t\t{ title: \"黑白\", action: this.basicOP, funcId: 5},\r\n\t\t\t{ title: \"高斯模糊\", action: this.basicOP, funcId: 6},\r\n          ]\r\n        }\r\n      ],\r\n      opCheckList: [\r\n\t\t{'op': this.getClipState, 'name': '自由裁剪', 'todo': this.endClip, 'param': null},\r\n\t\t{'op': this.getScaleState, 'name': '缩放', 'todo': this.endScaling, 'param': 0},\r\n\t\t{'op': this.getRotateState, 'name': '旋转', 'todo': this.endRotating, 'param': 0}\r\n\t]\r\n    };\r\n  },\r\n  methods: {\r\n\t...mapGetters('clip', [ 'getClipState']),\r\n\t...mapGetters('scale', [ 'getScaleState']),\r\n\t...mapGetters('rotate', [ 'getRotateState']),\r\n\r\n\t...mapActions('clip', [\r\n\t\t'initialClip', 'endClip',\r\n\t]),\r\n\t...mapActions('scale', [\r\n\t\t'doScaling', 'endScaling',\r\n\t]),\r\n\t...mapActions('rotate', [\r\n\t\t'doRotating', 'endRotating'\r\n\t]),\r\n\tpreCheck() {\r\n\t\tfor(var j = 0,len = this.opCheckList.length; j < len; j++){\r\n\t\t\tvar e = this.opCheckList[j];\r\n\t\t\tif (e.op()) {\r\n\t\t\t\tvar msg = e.name + \"结果尚未保存，是否放弃？\";\r\n\t\t\t\tif (confirm(msg)) e.todo(e.param);\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn true;\r\n\t},\r\n    basicOP(n) {\r\n\t\tif(!this.preCheck()) return;\r\n\t\tthis.opList.removeBackPart();\r\n\t\tthis.opList.push(parsing(this.canvas, n));\r\n\t\tconsole.log(\"opList: \", this.opList);\r\n    },\r\n\tclipping(n) {\r\n\t\tif(!this.preCheck()) return;\r\n\t\tthis.initialClip(n);\r\n\t},\r\n\tscaling(n) {\r\n\t\tif(!this.preCheck()) return;\r\n\t\tthis.doScaling(n);\r\n\t},\r\n\trotating(n) {\r\n\t\tif(!this.preCheck()) return;\r\n\t\tthis.doRotating(n);\r\n\t}\r\n  }\r\n};\r\n</script>\r\n\r\n<style>\r\n</style>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/vuetify-loader/lib/loader.js??ref--18-0!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Edits.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/vuetify-loader/lib/loader.js??ref--18-0!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Edits.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Edits.vue?vue&type=template&id=99c207e4&\"\nimport script from \"./Edits.vue?vue&type=script&lang=js&\"\nexport * from \"./Edits.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VContainer } from 'vuetify/lib/components/VGrid';\nimport { VList } from 'vuetify/lib/components/VList';\nimport { VListGroup } from 'vuetify/lib/components/VList';\nimport { VListItem } from 'vuetify/lib/components/VList';\nimport { VListItemContent } from 'vuetify/lib/components/VList';\nimport { VListItemTitle } from 'vuetify/lib/components/VList';\ninstallComponents(component, {VContainer,VList,VListGroup,VListItem,VListItemContent,VListItemTitle})\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-container',{attrs:{\"fluid\":\"\"}},[_c('v-row',[_c('v-col',{attrs:{\"cols\":\"12\"}},[_c('v-row',{attrs:{\"align\":\"center\",\"justify\":\"center\"}},[_c('v-btn-toggle',{attrs:{\"dense\":\"\",\"borderless\":\"\",\"background-color\":\"white accent-3\"}},[_c('v-btn',{on:{\"click\":_vm.undo}},[_c('v-icon',{attrs:{\"dark\":\"\"}},[_vm._v(\"mdi-undo\")])],1),_c('v-btn',{on:{\"click\":_vm.redo}},[_c('v-icon',{attrs:{\"dark\":\"\"}},[_vm._v(\"mdi-redo\")])],1),_c('v-btn',{on:{\"click\":_vm.resetToOrigin}},[_c('v-icon',{attrs:{\"dark\":\"\"}},[_vm._v(\"mdi-restore\")])],1)],1)],1)],1)],1),_c('v-subheader',[_vm._v(\"历史记录\")]),_c('v-list',{attrs:{\"shaped\":\"\"}},[_c('v-list-item-group',{attrs:{\"color\":\"primary\"},model:{value:(_vm.curState),callback:function ($$v) {_vm.curState=$$v},expression:\"curState\"}},_vm._l((this.opList.element),function(item,i){return _c('v-list-item',{key:i,on:{\"click\":function($event){return _vm.change(i)}}},[_c('v-list-item-content',[_c('v-list-item-title',{domProps:{\"textContent\":_vm._s(item.name)}})],1)],1)}),1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <v-container fluid>\r\n    <v-row>\r\n      <v-col cols=\"12\">\r\n        <v-row align=\"center\" justify=\"center\">\r\n          <v-btn-toggle dense borderless background-color=\"white accent-3\">\r\n            <v-btn @click=\"undo\">\r\n              <!-- 撤销 -->\r\n              <v-icon dark>mdi-undo</v-icon>\r\n            </v-btn>\r\n\r\n            <v-btn @click=\"redo\">\r\n              <!-- 重做 -->\r\n              <v-icon dark>mdi-redo</v-icon>\r\n            </v-btn>\r\n\r\n            <v-btn @click=\"resetToOrigin\">\r\n              <!-- 恢复原图 -->\r\n              <v-icon dark>mdi-restore</v-icon>\r\n            </v-btn>\r\n          </v-btn-toggle>\r\n        </v-row>\r\n      </v-col>\r\n    </v-row>\r\n\r\n    <!-- 历史记录 -->\r\n    <v-subheader>历史记录</v-subheader>\r\n    <v-list shaped>\r\n      <v-list-item-group v-model=\"curState\" color=\"primary\">\r\n        <v-list-item\r\n          v-for=\"(item, i) in this.opList.element\"\r\n          :key=\"i\"\r\n          @click=\"change(i)\"\r\n        >\r\n          <v-list-item-content>\r\n            <v-list-item-title v-text=\"item.name\"></v-list-item-title>\r\n          </v-list-item-content>\r\n        </v-list-item>\r\n      </v-list-item-group>\r\n    </v-list>\r\n  </v-container>\r\n</template>\r\n\r\n<script>\r\nimport { edit } from \"../js/operator\";\r\nimport { mapState, mapGetters, mapMutations, mapActions } from 'vuex';\r\n\r\nexport default {\r\n  name: \"history\",\r\n  data() {\r\n\treturn {\r\n\t\tcurState: 0,\r\n\t\topCheckList: [\r\n\t\t\t{'op': this.getClipState, 'name': '自由裁剪', 'todo': this.endClip, 'param': null},\r\n\t\t\t{'op': this.getScaleState, 'name': '缩放', 'todo': this.endScaling, 'param': 0}\r\n\t\t]\r\n\t}\r\n  },\r\n  watch: {\r\n\tlistenList: {\r\n\t\t// 监听列表变化，更新高亮条目\r\n\t\thandler(curVal) {\r\n\t\t\tthis.curState = curVal;\r\n\t\t}\r\n\t}\r\n  },\r\n  computed: {\r\n\t...mapState([\t// 全局变量\r\n\t\t'opList', 'canvas', 'cxt', 'originImgInfo',\r\n\t]),\r\n\tlistenList () {\r\n\t\treturn this.opList.getNowIndex();\r\n\t}\r\n  },\r\n  methods: {\r\n\t...mapGetters('clip',['getClipState']),\r\n\t...mapGetters('scale',['getScaleState']),\r\n\t...mapMutations([\r\n\t\t'setToOrigin'\r\n\t]),\r\n\t...mapMutations('clip',[\r\n\t\t'endClip',\r\n\t]),\r\n\t...mapActions('scale',[\r\n\t\t'endScaling'\r\n\t]),\r\n\tpreCheck() {\r\n\t\tfor(var j = 0,len = this.opCheckList.length; j < len; j++){\r\n\t\t\tvar e = this.opCheckList[j];\r\n\t\t\tif (e.op()) {\r\n\t\t\t\tvar msg = e.name + \"结果尚未保存，是否放弃？\";\r\n\t\t\t\tif (confirm(msg)) e.todo(e.param);\r\n\t\t\t\telse return false;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn true;\r\n\t},\r\n    resetToOrigin() {\r\n      if (confirm(\"您点击了恢复原图，该操作不可撤销，是否确认？\")) {\r\n\t\tthis.setToOrigin();\r\n        // this.opList.clear();\r\n        this.opList.reset();\r\n        console.log(\"opList:\", this.opList.size());\r\n        // console.log(\"redoList:\", this.$store.state.redoList.size());\r\n      }\r\n    },\r\n    undo() {\r\n\t\tif(!this.preCheck()) return;\r\n\t\tif (this.opList.getNowIndex() == 0) {\r\n\t\t\talert(\"没有可以撤销的操作了\");\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tconsole.log(\"undo canvas \", this.canvas);\r\n\t\tconst now = this.opList.getNowAndForward();\r\n\t\t\r\n\t\tif (this.opList.getNowIndex() == 0) {\r\n\t\t\tthis.setToOrigin();\r\n\t\t} else {\r\n\t\t\tedit(this.canvas, now.data);\r\n\t\t}\r\n\t\tconsole.log(\"opList:\", this.opList.size());\r\n    },\r\n    redo() {\r\n      if(!this.preCheck()) return;\r\n      if (this.opList.getNowIndex() == this.opList.size() - 1) {\r\n        alert(\"没有可以重做的操作了\");\r\n        return;\r\n      }\r\n      const now = this.opList.getNowAndBackward();\r\n      const imgData = now.data;\r\n      // const funcName = top.name;\r\n      edit(this.canvas, imgData);\r\n      // this.opList.push({\r\n      //   data: edit(this.canvas, imgData),\r\n      //   name: funcName\r\n      // });\r\n      console.log(\"opList:\", this.opList.size());\r\n    },\r\n    change(i) {\r\n      if(!this.preCheck()) return;\r\n      const now = this.opList.getAndSetNow(i);\r\n      if (now == undefined) {\r\n        console.log(\"非法操作\");\r\n        return;\r\n      }\r\n      console.log(\"history i: \", i);\r\n      const imgData = now.data;\r\n      edit(this.canvas, imgData);\r\n    }\r\n  }\r\n};\r\n</script>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/vuetify-loader/lib/loader.js??ref--18-0!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./history.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/vuetify-loader/lib/loader.js??ref--18-0!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./history.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./history.vue?vue&type=template&id=756f4d73&\"\nimport script from \"./history.vue?vue&type=script&lang=js&\"\nexport * from \"./history.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VBtnToggle } from 'vuetify/lib/components/VBtnToggle';\nimport { VCol } from 'vuetify/lib/components/VGrid';\nimport { VContainer } from 'vuetify/lib/components/VGrid';\nimport { VIcon } from 'vuetify/lib/components/VIcon';\nimport { VList } from 'vuetify/lib/components/VList';\nimport { VListItem } from 'vuetify/lib/components/VList';\nimport { VListItemContent } from 'vuetify/lib/components/VList';\nimport { VListItemGroup } from 'vuetify/lib/components/VList';\nimport { VListItemTitle } from 'vuetify/lib/components/VList';\nimport { VRow } from 'vuetify/lib/components/VGrid';\nimport { VSubheader } from 'vuetify/lib/components/VSubheader';\ninstallComponents(component, {VBtn,VBtnToggle,VCol,VContainer,VIcon,VList,VListItem,VListItemContent,VListItemGroup,VListItemTitle,VRow,VSubheader})\n","<template>\r\n  <v-app id=\"inspire\">\r\n    <v-app-bar app clipped-right clipped-left :color=\"barColor\" dark>\r\n      <v-app-bar-nav-icon @click.stop=\"drawer = !drawer\" />\r\n      <v-toolbar-title>OnlinePS</v-toolbar-title>\r\n      <v-spacer />\r\n      <v-app-bar-nav-icon @click.stop=\"drawerRight = !drawerRight\" />\r\n    </v-app-bar>\r\n\r\n    <!-- 右边侧边栏 -->\r\n    <v-navigation-drawer v-model=\"drawerRight\" app width=\"auto\" right clipped>\r\n      <v-list dense>\r\n        <v-list-item>\r\n          <history></history>\r\n        </v-list-item>\r\n      </v-list>\r\n    </v-navigation-drawer>\r\n\r\n    <!-- 左侧侧边栏 -->\r\n    <v-navigation-drawer v-model=\"drawer\" app width=\"auto\" clipped>\r\n      <v-list dense>\r\n        <v-list-item>\r\n          <Edits></Edits>\r\n        </v-list-item>\r\n      </v-list>\r\n    </v-navigation-drawer>\r\n\r\n    <v-navigation-drawer v-model=\"left\" fixed temporary />\r\n\r\n    <v-content>\r\n      <v-container class=\"fill-height\" fluid>\r\n        <v-row justify=\"center\" align=\"center\">\r\n          <midBlock @canvasReady=\"canvasReady\"></midBlock>\r\n        </v-row>\r\n      </v-container>\r\n    </v-content>\r\n\r\n    <v-navigation-drawer v-model=\"right\" fixed right temporary />\r\n\r\n    <v-footer app :color=\"barColor\" class=\"white--text\">\r\n      <span>SETeam06</span>\r\n      <v-spacer />\r\n      <span>&copy; 2020</span>\r\n    </v-footer>\r\n  </v-app>\r\n</template>\r\n\r\n<script>\r\nimport midBlock from \"./components/midBlock\";\r\nimport Edits from \"./components/Edits\";\r\nimport history from \"./components/history\";\r\nimport { mapState } from 'vuex';\r\n\r\nexport default {\r\n  props: {\r\n    source: String\r\n  },\r\n  data: () => ({\r\n    drawer: null,\r\n    drawerRight: null,\r\n    left: false,\r\n    right: false,\r\n    barColor: \"black\",\r\n    originImgData: undefined\r\n  }),\r\n  computed: {\r\n\t...mapState([\t// 全局变量\r\n\t\t'opList', 'canvas', 'cxt',\r\n\t])\r\n  },\r\n  methods: {\r\n    canvasReady () {\r\n      var imageData = this.cxt.getImageData(\r\n        0,\r\n        0,\r\n        this.canvas.width,\r\n        this.canvas.height\r\n      );\r\n      this.originImgData = new ImageData(imageData.data, imageData.width, imageData.height);\r\n      this.opList.push({ data: this.originImgData, name: \"原图\" });\r\n      console.log(\"原图数据解析完成\");\r\n    }\r\n  },\r\n  components: {\r\n    midBlock,\r\n    Edits,\r\n    history\r\n  }\r\n};\r\n</script>","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/vuetify-loader/lib/loader.js??ref--18-0!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/vuetify-loader/lib/loader.js??ref--18-0!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=dffa4e24&\"\nimport script from \"./App.vue?vue&type=script&lang=js&\"\nexport * from \"./App.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VApp } from 'vuetify/lib/components/VApp';\nimport { VAppBar } from 'vuetify/lib/components/VAppBar';\nimport { VAppBarNavIcon } from 'vuetify/lib/components/VAppBar';\nimport { VContainer } from 'vuetify/lib/components/VGrid';\nimport { VContent } from 'vuetify/lib/components/VContent';\nimport { VFooter } from 'vuetify/lib/components/VFooter';\nimport { VList } from 'vuetify/lib/components/VList';\nimport { VListItem } from 'vuetify/lib/components/VList';\nimport { VNavigationDrawer } from 'vuetify/lib/components/VNavigationDrawer';\nimport { VRow } from 'vuetify/lib/components/VGrid';\nimport { VSpacer } from 'vuetify/lib/components/VGrid';\nimport { VToolbarTitle } from 'vuetify/lib/components/VToolbar';\ninstallComponents(component, {VApp,VAppBar,VAppBarNavIcon,VContainer,VContent,VFooter,VList,VListItem,VNavigationDrawer,VRow,VSpacer,VToolbarTitle})\n","import Vue from 'vue';\nimport Vuetify from 'vuetify/lib';\n\nVue.use(Vuetify);\n\nexport default new Vuetify({\n});\n","import { parsing } from \"../../js/operator\";\r\nconst clipModule = {\r\n\tnamespaced: true,\n\tstate: {\r\n\t\tclipState: false,  // 标记是否处于裁剪状态\r\n\t\tafterValidClick: false, // 标记是否点击了截图框区域\r\n\t\tfuncId: null,\r\n\t\tboxParams: {\r\n\t\t\tX: null,\r\n\t\t\tY: null,\r\n\t\t\tW: null,\r\n\t\t\tH: null,\r\n\t\t\tcurrentX: null,\r\n\t\t\tcurrentY: null,\r\n\t\t\tkind: null,\r\n\t\t},\r\n\t\tboxStyle: {\t// 截图框相关参数\r\n\t\t\tposition:'absolute',\r\n\t\t\tborder:'1px solid black',\r\n\t\t\theight: '0',\r\n\t\t\twidth: '0',\r\n\t\t\tleft: '0',\r\n\t\t\ttop: '0',\r\n\t\t},\r\n\t\t\r\n\t},\n\tgetters: { // 获取数据本身的属性\r\n\t\tgetClipState (state) {return state.clipState;}\r\n\t},\r\n\tmutations: { // commit 修改数据\r\n\t\tmouseDownEvent (state, e) {  // 点击\r\n\t\t\tif (!state.clipState || (e.target.parentNode.id !== \"box\" && e.target.id !== \"box\")) return;\r\n\t\t\tconsole.log('点击落在截图框内', e.target.parentNode.id, e.target.id, state.boxParams);\r\n\t\t\tstate.afterValidClick = true\r\n\t\t\tstate.boxParams.currentX = e.clientX  //鼠标按下时坐标x轴\r\n\t\t\tstate.boxParams.currentY = e.clientY  //鼠标按下时坐标y轴\r\n\t\t\tstate.boxParams.kind = e.target.id\r\n\t\t},\r\n\t\tsetBoxParams (state, e) {\r\n\t\t\tstate.boxParams.X = e.X\r\n\t\t\tstate.boxParams.Y = e.Y\r\n\t\t\tstate.boxParams.W = e.W\r\n\t\t\tstate.boxParams.H = e.H\r\n\t\t},\r\n\t\tresetAll (state) {\r\n\t\t\tstate.afterValidClick = false\r\n\t\t\tstate.boxParams.X = null\r\n\t\t\tstate.boxParams.Y = null\r\n\t\t\tstate.boxParams.W = null\r\n\t\t\tstate.boxParams.H = null\r\n\t\t\tstate.boxParams.currentX = null\r\n\t\t\tstate.boxParams.currentY = null\r\n\t\t\tstate.boxParams.kind = null\r\n\t\t}\r\n\t},\r\n\tactions: {\r\n\t\tinitialClip ({dispatch, state, rootState, commit}, n) {\r\n\t\t\tconsole.log('裁切初始化')\r\n\t\t\tstate.funcId = n\r\n\t\t\tstate.clipState = true\r\n\t\t\trootState.showBottomBar = false\t// 隐藏选取/保存图片栏\r\n\t\t\tcommit('resetAll')\r\n\t\t\t// 将蒙层设置为图片大小\r\n\t\t\trootState.clipMask.width = rootState.canvas.width\r\n\t\t\trootState.clipMask.height = rootState.canvas.height\r\n\t\t\trootState.clipFrame.style.width = rootState.canvas.width + \"px\"\r\n\t\t\trootState.clipFrame.style.height = rootState.canvas.height + \"px\"\r\n\t\t\tconsole.log(rootState.clipFrame)\r\n\t\t\t// 将截图框初始化为与图片短边等长的正方形\r\n\t\t\tvar initBoxSize = Math.min(rootState.canvas.width, rootState.canvas.height)\r\n\t\t\tvar x = (rootState.canvas.width - initBoxSize) / 2\r\n\t\t\tvar y = (rootState.canvas.height - initBoxSize) / 2\r\n\t\t\tcommit('setBoxParams', {\r\n\t\t\t\tX: x,\r\n\t\t\t\tY: y,\r\n\t\t\t\tW: initBoxSize,\r\n\t\t\t\tH: initBoxSize\r\n\t\t\t})\r\n\t\t\tstate.boxStyle.height = state.boxStyle.width = initBoxSize + \"px\"\r\n\t\t\tstate.boxStyle.left = x + \"px\"\r\n\t\t\tstate.boxStyle.top = y + \"px\"\r\n\t\t\tdispatch('drawTrim')\r\n\t\t},\r\n\t\tmouseMoveEvent ({ dispatch, state, rootState}, e) {  // 移动\r\n\t\t\tif (!state.afterValidClick || !state.clipState) return;\r\n\t\t\tconsole.log('mouseMoveEvent', e)\r\n\t\t\t\t\t\r\n\t\t\tvar nowX = e.clientX; // 鼠标移动时x坐标\r\n\t\t\tvar nowY = e.clientY; // 鼠标移动时y坐标\r\n\t\t\tvar disX = nowX - state.boxParams.currentX;  // 鼠标x方向移动距离\r\n\t\t\tvar disY = nowY - state.boxParams.currentY;  // 鼠标y方向移动距离\r\n\t\t\t\r\n\t\t\tvar calLeft = state.boxParams.X\r\n\t\t\tvar calTop = state.boxParams.Y\r\n\t\t\tvar calW = state.boxParams.W\r\n\t\t\tvar calH = state.boxParams.H\r\n\t\t\tvar rangeX = [0, rootState.canvas.width]\r\n\t\t\tvar rangeY = [0, rootState.canvas.height]\r\n\t\t\tvar rangeW = [0, rootState.canvas.width]\r\n\t\t\tvar rangeH = [0, rootState.canvas.height]\r\n\t\t\tif (state.boxParams.kind === \"UC\") {\t//上拉伸\r\n\t\t\t\tcalTop += disY;\r\n\t\t\t\tcalH -= disY;\r\n\t\t\t\trangeY[1] = rangeH[1] = state.boxParams.H + state.boxParams.Y\r\n\t\t\t} else if (state.boxParams.kind === \"LC\") { //左拉伸\r\n\t\t\t\tcalLeft += disX;\r\n\t\t\t\tcalW -= disX;\r\n\t\t\t\trangeX[1] = rangeW[1] = state.boxParams.W + state.boxParams.X\r\n\t\t\t} else if (state.boxParams.kind === \"RC\") { //右拉伸\r\n\t\t\t\tcalW += disX;\r\n\t\t\t\trangeX[0] = state.boxParams.X\r\n\t\t\t\trangeW[1] -= state.boxParams.X\r\n\t\t\t} else if (state.boxParams.kind === \"DC\") { //下拉伸\r\n\t\t\t\tcalH += disY;\r\n\t\t\t\trangeY[0] = state.boxParams.Y\r\n\t\t\t\trangeH[1] -= state.boxParams.Y\r\n\t\t\t} else if (state.boxParams.kind === \"LU\") { //左上拉伸\r\n\t\t\t\tcalLeft += disX;\r\n\t\t\t\tcalW -= disX;\r\n\t\t\t\tcalTop += disY;\r\n\t\t\t\tcalH -= disY;\r\n\t\t\t\trangeX[1] = rangeW[1] = state.boxParams.W + state.boxParams.X\r\n\t\t\t\trangeY[1] = rangeH[1] = state.boxParams.H + state.boxParams.Y\r\n\t\t\t} else if (state.boxParams.kind === \"RU\") { //右上拉伸\r\n\t\t\t\tcalTop += disY;\r\n\t\t\t\tcalH -= disY;\r\n\t\t\t\tcalW += disX;\r\n\t\t\t\trangeX[0] = state.boxParams.X\r\n\t\t\t\trangeW[1] -= state.boxParams.X\r\n\t\t\t\trangeY[1] = rangeH[1] = state.boxParams.H + state.boxParams.Y\r\n\t\t\t} else if (state.boxParams.kind === \"LD\") { //左下拉伸\r\n\t\t\t\tcalLeft += disX;\r\n\t\t\t\tcalW -= disX;\r\n\t\t\t\tcalH += disY;\r\n\t\t\t\trangeX[1] = rangeW[1] = state.boxParams.W + state.boxParams.X\r\n\t\t\t\trangeY[0] = state.boxParams.Y\r\n\t\t\t\trangeH[1] -= state.boxParams.Y\r\n\t\t\t} else if (state.boxParams.kind === \"RD\") { //右下拉伸\r\n\t\t\t\tcalW += disX;\r\n\t\t\t\tcalH += disY;\r\n\t\t\t\trangeX[0] = state.boxParams.X\r\n\t\t\t\trangeW[1] -= state.boxParams.X\r\n\t\t\t\trangeY[0] = state.boxParams.Y\r\n\t\t\t\trangeH[1] -= state.boxParams.Y\r\n\t\t\t} else { //移动\r\n\t\t\t\tcalLeft += disX;\r\n\t\t\t\tcalTop += disY;\r\n\t\t\t\trangeX[1] -= state.boxParams.W\r\n\t\t\t\trangeY[1] -= state.boxParams.H\r\n\t\t\t}\r\n\t\t\tstate.boxStyle.top = Math.max(rangeY[0], Math.min(rangeY[1], calTop)) + \"px\"\r\n\t\t\tstate.boxStyle.left = Math.max(rangeX[0], Math.min(rangeX[1], calLeft)) + \"px\"\r\n\t\t\tstate.boxStyle.height = Math.max(rangeH[0], Math.min(rangeH[1], calH)) + \"px\"\r\n\t\t\tstate.boxStyle.width = Math.max(rangeW[0], Math.min(rangeW[1], calW)) + \"px\"\r\n\t\t\tconsole.log(state.boxParams.kind, state.boxStyle.left, state.boxStyle.top, state.boxStyle.width, state.boxStyle.height)\r\n\t\t\tdispatch('drawTrim');\r\n\t\t},\r\n\t\tmouseReleaseEvent ({state, commit}) {  // 松手\r\n\t\t\tif (!state.afterValidClick || !state.clipState) return;\r\n\t\t\tstate.afterValidClick = false\r\n\t\t\t// 保存相关裁剪选择框信息\r\n\t\t\tcommit('setBoxParams', {\r\n\t\t\t\tX: parseInt(state.boxStyle.left),\r\n\t\t\t\tY: parseInt(state.boxStyle.top),\r\n\t\t\t\tW: parseInt(state.boxStyle.width),\r\n\t\t\t\tH: parseInt(state.boxStyle.height)\r\n\t\t\t})\r\n\t\t},\r\n\t\tdrawTrim ({state, rootState}) {  // 画框\r\n\t\t\tconsole.log('drawTrim')\r\n\t\t\t// 每帧都要清除画布\r\n\t\t\trootState.maskCxt.clearRect(0, 0, rootState.clipMask.width, rootState.clipMask.height);\r\n\t\t\t\r\n\t\t\t// 绘制蒙层\r\n\t\t\trootState.maskCxt.save();\r\n\t\t\trootState.maskCxt.fillStyle = 'rgba(166, 166, 166, 0.6)';\r\n\t\t\trootState.maskCxt.fillRect(0, 0, rootState.clipMask.width, rootState.clipMask.height);\r\n\t\t\t\r\n\t\t\t// 将蒙层凿开\r\n\t\t\trootState.maskCxt.globalCompositeOperation = 'source-atop';\r\n\t\t\trootState.maskCxt.clearRect(parseInt(state.boxStyle.left), parseInt(state.boxStyle.top), \r\n\t\t\t\tparseInt(state.boxStyle.width), parseInt(state.boxStyle.height)); // 裁剪选择框\r\n\t\t\trootState.maskCxt.restore();\r\n\t\t},\r\n\t\tasync endClip ({rootState, dispatch}, e) {\r\n\t\t\tawait dispatch('exit', e)\r\n\t\t\tconsole.log('退出裁切')\r\n\t\t\trootState.showBottomBar = true\t// 显示选取/保存图片栏\r\n\t\t},\r\n\t\texit({state, rootState, commit}, e){\r\n\t\t\tif(e == 0){\r\n\t\t\t\trootState.maskCxt.clearRect(0, 0, rootState.clipMask.width, rootState.clipMask.height);\r\n\t\t\t\tcommit('resetAll')\r\n\t\t\t\tstate.clipState = false\r\n\t\t\t\tconsole.log('取消裁切');\r\n\t\t\t} else {\r\n\t\t\t\tvar data = rootState.cxt.getImageData(state.boxParams.X, state.boxParams.Y,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tstate.boxParams.W, state.boxParams.H);\r\n\t\t\t\tconsole.log(data)\r\n\t\t\t\trootState.cxt.clearRect(0, 0, rootState.canvas.width, rootState.canvas.height);\r\n\t\t\t\trootState.maskCxt.clearRect(0, 0, rootState.clipMask.width, rootState.clipMask.height);\r\n\t\t\t\trootState.canvas.width = state.boxParams.W;\r\n\t\t\t\trootState.canvas.height = state.boxParams.H;\r\n\t\t\t\trootState.cxt.putImageData(data, 0, 0);\r\n\t\t\t\t\r\n\t\t\t\t// 置为false，表示结束当前流程\r\n\t\t\t\tstate.clipState = false;\r\n\t\t\t\tconsole.log('裁切完成');\r\n\t\t\t\t\r\n\t\t\t\t// 更新opList\r\n\t\t\t\treturn new Promise((resolve) => {\r\n\t\t\t\t\trootState.opList.removeBackPart();\r\n\t\t\t\t\trootState.opList.push(parsing(rootState.canvas, state.funcId));\r\n\t\t\t\t\tconsole.log('历史记录已更新');\r\n\t\t\t\t\tresolve();\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t}\n}\r\n\r\nexport default clipModule;","import { parsing } from \"../../js/operator\";\r\nconst scaleModule = {\r\n\tnamespaced: true,\n\tstate: {\r\n\t\tscaleState: false,  // 标记是否处于缩放状态\r\n\t\tscaleRatio: 100,\r\n\t\tcurImg: null,\r\n\t\timgW: 0,\r\n\t\timgH: 0,\r\n\t\tmax: null,\r\n\t\tfuncId: null,\r\n\t},\n\tgetters: { // 获取数据本身的属性\r\n\t\tgetScaleState (state) {return state.scaleState;}\r\n\t},\r\n\tmutations: { // commit 修改数据\r\n\t\tsetScaleRatio(state, e) {\r\n\t\t\tstate.scaleRatio = e;\r\n\t\t}\r\n\t},\r\n\tactions: {\r\n\t\tsetImgByCanvas ({state, rootState}) {\r\n\t\t\t// 从当前画布构建<img/>\r\n\t\t\treturn new Promise((resolve) => {\r\n\t\t\t\tstate.imgW = rootState.canvas.width\r\n\t\t\t\tstate.imgH = rootState.canvas.height\r\n\t\t\t\tstate.curImg = new Image();\r\n\t\t\t\tstate.curImg.crossOrigin = '';\r\n\t\t\t\tstate.curImg.src = rootState.canvas.toDataURL();\r\n\t\t\t\t// 兼容性图片onload事件\r\n\t\t\t\tstate.curImg.onload = function(){\r\n\t\t\t\t\tresolve();\r\n\t\t\t\t}\r\n\t\t\t\tif (state.curImg.complete) {\r\n\t\t\t\t\tresolve();\t// 跳过onload直接返回\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\tasync doScaling ({state, rootState, dispatch}, n) {\r\n\t\t\tstate.funcId = n\r\n\t\t\trootState.showBottomBar = false\t// 隐藏选取/保存图片栏\r\n\t\t\tawait dispatch('setImgByCanvas')\r\n\t\t\tstate.max = rootState.edgeH*200 / state.imgH\r\n\t\t\tstate.scaleRatio = 100\r\n\t\t\trootState.canvas.width = rootState.edgeW\r\n\t\t\trootState.canvas.height = rootState.edgeH\t// 重设后canvas会重新加载，故要重新画图\r\n\t\t\trootState.cxt.drawImage(state.curImg, (rootState.canvas.width - state.imgW)/2, (rootState.canvas.height - state.imgH)/2)\r\n\t\t\tstate.scaleState = true\r\n\t\t\tconsole.log('缩放初始化完成')\r\n\t\t},\r\n\t\treScale({state, rootState}) {\r\n\t\t\tif(!state.scaleState) return;\r\n\t\t\tconsole.log('重新缩放')\r\n\t\t\tvar rate = state.scaleRatio / 100\r\n\t\t\trootState.cxt.clearRect(0, 0, rootState.canvas.width, rootState.canvas.height)\r\n\t\t\t\r\n\t\t\trootState.cxt.save()\r\n\t\t\trootState.cxt.translate(rootState.canvas.width/2, rootState.canvas.height/2)\r\n\t\t\trootState.cxt.scale(rate, rate)\r\n\t\t\trootState.cxt.drawImage(state.curImg, -state.imgW/2, -state.imgH/2)\r\n\t\t\trootState.cxt.restore()\r\n\t\t},\r\n\t\tasync endScaling({rootState, dispatch}, e) {\r\n\t\t\tawait dispatch('exit', e)\r\n\t\t\tconsole.log('退出缩放')\r\n\t\t\trootState.showBottomBar = true\t// 显示选取/保存图片栏\r\n\t\t},\r\n\t\texit({state, rootState}, e) {\r\n\t\t\tif (e == 0) { // 取消缩放，恢复初始状态\r\n\t\t\t\tconsole.log('取消缩放', e)\r\n\t\t\t\trootState.cxt.clearRect(0, 0, rootState.canvas.width, rootState.canvas.height)\r\n\t\t\t\trootState.canvas.width = state.imgW\r\n\t\t\t\trootState.canvas.height = state.imgH\r\n\t\t\t\trootState.cxt.drawImage(state.curImg, 0, 0)\r\n\t\t\t\tstate.scaleState = false\r\n\t\t\t} else { // 确认缩放，更新画布\r\n\t\t\t\tconsole.log('确认缩放', e)\r\n\t\t\t\tvar rate = state.scaleRatio / 100\r\n\t\t\t\trootState.cxt.clearRect(0, 0, rootState.canvas.width, rootState.canvas.height)\r\n\t\t\t\t\r\n\t\t\t\tvar sx = 0, sy = 0, sw, sh, dw = state.imgW * rate, dh = state.imgH * rate\r\n\t\t\t\t// 画布更新为缩放后画布大小，并重新绘制图片\r\n\t\t\t\t// 注意 sx,sy,sw,sh 是相对于 source_img 而言，不是 canvas\r\n\t\t\t\tif(dw <= rootState.edgeW && dh <= rootState.edgeH){\t// 放大比率不超过屏幕时\r\n\t\t\t\t\trootState.canvas.width = dw\r\n\t\t\t\t\trootState.canvas.height = dh\r\n\t\t\t\t\tsw = state.imgW\r\n\t\t\t\t\tsh = state.imgH\r\n\t\t\t\t} else {\r\n\t\t\t\t\tsx = (dw - rootState.edgeW) / (2 * rate)\r\n\t\t\t\t\tsy = (dh - rootState.edgeH) / (2 * rate)\r\n\t\t\t\t\tsw = rootState.edgeW / rate\r\n\t\t\t\t\tsh = rootState.edgeH / rate\r\n\t\t\t\t}\r\n\t\t\t\trootState.cxt.drawImage(state.curImg, sx, sy, sw, sh, 0, 0, rootState.canvas.width, rootState.canvas.height)\r\n\t\t\t\t\r\n\t\t\t\t// 更新opList\r\n\t\t\t\treturn new Promise((resolve) => {\r\n\t\t\t\t\trootState.opList.removeBackPart();\r\n\t\t\t\t\trootState.opList.push(parsing(rootState.canvas, state.funcId));\r\n\t\t\t\t\tconsole.log('历史记录已更新');\r\n\t\t\t\t\tstate.scaleState = false\r\n\t\t\t\t\tresolve();\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t}\n}\r\n\r\nexport default scaleModule;","import { parsing } from \"../../js/operator\";\r\nconst rotateModule = {\r\n\tnamespaced: true,\r\n\tstate: {\r\n\t\trotateState: false,  // 标记是否处于旋转状态\r\n\t\ttheta: 0,\r\n\t\tcurImg: null,\r\n\t\timgW: 0,\r\n\t\timgH: 0,\r\n\t\tfuncId: null,\r\n\t},\r\n\tgetters: { // 获取数据本身的属性\r\n\t\tgetRotateState (state) {return state.rotateState;}\r\n\t},\r\n\tmutations: { // commit 修改数据\r\n\t\tsetTheta(state, e) {\r\n\t\t\tstate.theta = e;\r\n\t\t}\r\n\t},\r\n\tactions: {\r\n\t\tsetImgByCanvas ({state, rootState}) {\r\n\t\t\t// 从当前画布构建<img/>\r\n\t\t\treturn new Promise((resolve) => {\r\n\t\t\t\tstate.imgW = rootState.canvas.width\r\n\t\t\t\tstate.imgH = rootState.canvas.height\r\n\t\t\t\tstate.curImg = new Image();\r\n\t\t\t\tstate.curImg.crossOrigin = '';\r\n\t\t\t\tstate.curImg.src = rootState.canvas.toDataURL();\r\n\t\t\t\t// 兼容性图片onload事件\r\n\t\t\t\tstate.curImg.onload = function(){\r\n\t\t\t\t\tresolve();\r\n\t\t\t\t}\r\n\t\t\t\tif (state.curImg.complete) {\r\n\t\t\t\t\tresolve();\t// 跳过onload直接返回\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\tasync doRotating ({state, rootState, dispatch}, n) {\r\n\t\t\tstate.funcId = n\r\n\t\t\trootState.showBottomBar = false\t// 隐藏选取/保存图片栏\r\n\t\t\tawait dispatch('setImgByCanvas')\r\n\t\t\tstate.theta = 0\r\n\t\t\tstate.rotateState = true\r\n\t\t\tconsole.log('旋转初始化完成')\r\n\t\t},\r\n\t\treRotate({state, rootState}) {\r\n\t\t\tif(!state.rotateState) return;\r\n\t\t\tconsole.log('重新旋转')\r\n\t\t\trootState.cxt.clearRect(0, 0, rootState.canvas.width, rootState.canvas.height)\r\n\t\t\t\r\n\t\t\trootState.cxt.save()\r\n\t\t\trootState.cxt.translate(rootState.canvas.width/2, rootState.canvas.height/2)\r\n\t\t\trootState.cxt.rotate(state.theta*Math.PI/180);\r\n\t\t\trootState.cxt.drawImage(state.curImg, -state.imgW/2, -state.imgH/2)\r\n\t\t\trootState.cxt.restore()\r\n\t\t},\r\n\t\tasync endRotating({rootState, dispatch}, e) {\r\n\t\t\tawait dispatch('exit', e)\r\n\t\t\tconsole.log('退出旋转')\r\n\t\t\trootState.showBottomBar = true\t// 显示选取/保存图片栏\r\n\t\t},\r\n\t\texit ({state, rootState}, e) {\r\n\t\t\tif (e == 0) { // 取消旋转，恢复初始状态\r\n\t\t\t\tconsole.log('取消旋转', e)\r\n\t\t\t\trootState.cxt.clearRect(0, 0, rootState.canvas.width, rootState.canvas.height)\r\n\t\t\t\trootState.canvas.width = state.imgW\r\n\t\t\t\trootState.canvas.height = state.imgH\r\n\t\t\t\trootState.cxt.drawImage(state.curImg, 0, 0)\r\n\t\t\t\tstate.rotateState = false\r\n\t\t\t} else { // 确认旋转，更新画布\r\n\t\t\t\tconsole.log('确认旋转', e)\r\n\t\t\t\t// 更新opList\r\n\t\t\t\treturn new Promise((resolve) => {\r\n\t\t\t\t\trootState.opList.removeBackPart();\r\n\t\t\t\t\trootState.opList.push(parsing(rootState.canvas, state.funcId));\r\n\t\t\t\t\tconsole.log('历史记录已更新');\r\n\t\t\t\t\tstate.rotateState = false\r\n\t\t\t\t\tresolve();\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport default rotateModule;","class list {\r\n\tconstructor(capacity) {\r\n\t\tthis.element = [];\r\n\t\tthis.nowIndex = -1;\r\n\t\tthis.cap = capacity;\r\n\t}\r\n\r\n\t// 获取指针位置\r\n\tgetNowIndex() {\r\n\t\treturn this.nowIndex;\r\n\t}\r\n\r\n\t// 获取当前元素并把指针向前移\r\n\tgetNowAndForward() {\r\n\t\tif (this.nowIndex < 0) return;\r\n\t\tthis.nowIndex--;\r\n\t\treturn this.element[this.nowIndex]\r\n\t}\r\n\r\n\t// 获取当前元素并把指针向后移\r\n\tgetNowAndBackward() {\r\n\t\tif (this.nowIndex < 0) return;\r\n\t\tthis.nowIndex++;\r\n\t\treturn this.element[this.nowIndex]\r\n\t}\r\n\r\n\t// 获取i对应的元素并把指针指向它\r\n\tgetAndSetNow(i) {\r\n\t\tif (i < 0 || i > this.size()) return;\r\n\t\tthis.nowIndex = i;\r\n\t\treturn this.element[this.nowIndex]\r\n\t}\r\n\r\n\t// 除了链头的origin全都清除，改变指针指向\r\n\treset() {\r\n\t\t// console.log(\"reset0 \", this.element)\r\n\t\tthis.element.splice(1);\r\n\t\tthis.nowIndex = 0;\r\n\t\t// console.log(\"reset1 \", this.element)\r\n\t\treturn;\r\n\t}\r\n\r\n\t// 把指针后面的全清除\r\n\tremoveBackPart() {\r\n\t\tif (this.nowIndex == -1) return;\r\n\t\tthis.element.splice(this.nowIndex + 1)\r\n\t\treturn\r\n\t}\r\n\r\n\tat(i) {\r\n\t\tif (i < 0 || i > this.element.length) {\r\n\t\t\tconsole.log(\"Invalid index\")\r\n\t\t\treturn\r\n\t\t}\r\n\t\treturn this.element[i]\r\n\t}\r\n\r\n\tpush(e) {\r\n\t\tif (e == undefined) {\r\n\t\t\tconsole.log('push undefined.');\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif (this.element.length == this.cap) {\r\n\t\t\tthis.element.shift();\r\n\t\t\tconsole.log('超过容量，挤掉栈底')\r\n\t\t\tthis.nowIndex--;\r\n\t\t}\r\n\t\tthis.element.push(e);\r\n\t\tthis.nowIndex++;\r\n\t\treturn;\r\n\t}\r\n\r\n\tpop() {\r\n\t\tif (this.element.length == 0) return;\r\n\t\tthis.nowIndex--;\r\n\t\treturn this.element.pop();\r\n\t}\r\n\t\r\n\tback() {\r\n\t\treturn this.element[this.element.length - 1];\r\n\t}\r\n\r\n\tsize() {\r\n\t\treturn this.element.length;\r\n\t}\r\n\r\n\tempty() {\r\n\t\treturn this.element.length == 0;\r\n\t}\r\n\r\n\tclear() {\r\n\t\tthis.element.splice(0, this.element.length);\r\n\t\tthis.nowIndex = -1;\r\n\t\treturn;\r\n\t}\r\n}\r\n\r\nexport {\r\n\tlist\r\n}","import Vue from 'vue'\r\nimport Vuex from 'vuex'\r\nimport clipModule from \"./modules/clip.js\"\r\nimport scaleModule from \"./modules/scale.js\"\r\nimport rotateModule from \"./modules/rotate.js\"\r\nimport { list } from '../js/list'\r\n\r\nVue.use(Vuex)\r\n\r\nconst store = new Vuex.Store({\r\n\tmodules: {\r\n\t\tclip: clipModule,\r\n\t\tscale: scaleModule,\r\n\t\trotate: rotateModule,\r\n\t},\r\n    state: { // 数据源\r\n        opList: new list(10),  // 历史记录列表\r\n\t\tcanvas: null,\t// 画布\r\n\t\tcxt: null,\t\t// 画布接口\r\n\t\tclipMask: null,\t// 蒙版画布\r\n\t\tmaskCxt: null,\t// 蒙版画布接口\r\n\t\tclipFrame: null,// 截图框\r\n\t\toriginImgInfo: null,\t// 初始图象信息\r\n\t\tedgeW: null,\t// 画布可以延伸的最大宽度\r\n\t\tedgeH: null,\t// 画布可以延伸的最大高度\r\n\t\tshowBottomBar: true\t// 显示选取/保存图片栏\r\n    },\r\n\tgetters: { // 获取数据本身的属性\r\n\t},\r\n\tmutations: { // commit 修改数据\r\n\t\tsetCanvas (state, items) {\r\n\t\t\t// 将画布设为全局变量\r\n\t\t\tstate.canvas = items.canvas;\r\n\t\t\tstate.cxt = items.cxt;\r\n\t\t\tstate.clipMask = items.clipMask;\r\n\t\t\tstate.maskCxt = items.maskCxt;\r\n\t\t\tstate.clipFrame = items.clipFrame;\r\n\t\t},\r\n\t\tsetEdge (state, items) {\r\n\t\t\tstate.edgeH = items.edgeH;\r\n\t\t\tstate.edgeW = items.edgeW;\r\n\t\t},\r\n\t\tstoreOriginImgInfo (state) {\r\n\t\t\tstate.originImgInfo = state.cxt.getImageData(0, 0, state.canvas.width, state.canvas.height)\r\n\t\t},\r\n\t\tsetToOrigin (state) {\r\n\t\t\tstate.cxt.clearRect(0, 0, state.canvas.width, state.canvas.height)\r\n\t\t\tstate.canvas.width = state.originImgInfo.width\r\n\t\t\tstate.canvas.height = state.originImgInfo.height\r\n\t\t\tstate.cxt.putImageData(state.originImgInfo, 0, 0)\r\n\t\t},\r\n\t},\r\n\tactions: { // dispatch 异步操作，返回mutations\r\n\t}\r\n})\r\n\r\nexport default store;","import Vue from 'vue'\r\nimport App from './App.vue'\r\nimport vuetify from './plugins/vuetify';\r\nimport store from './store/index';\r\n\r\nVue.config.productionTip = false\r\n\r\nnew Vue({\r\n\tel: '#app',\r\n    store,\r\n    vuetify,\r\n    render: h => h(App)\r\n});","module.exports = __webpack_public_path__ + \"img/default1.3848437a.png\";","module.exports = __webpack_public_path__ + \"img/default2.879a0139.png\";","module.exports = __webpack_public_path__ + \"img/default3.62d0c72d.png\";"],"sourceRoot":""}